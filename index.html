<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/hexo-blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/hexo-blog/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/hexo-blog/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/hexo-blog/images/logo.svg" color="#222">

<link rel="stylesheet" href="/hexo-blog/css/main.css">


<link rel="stylesheet" href="/hexo-blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"github.com","root":"/hexo-blog/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Welcome">
<meta property="og:url" content="https://github.com/rulerofterabithia/index.html">
<meta property="og:site_name" content="Welcome">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="特雷比西亚的王">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://github.com/rulerofterabithia/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Welcome</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/hexo-blog/atom.xml" title="Welcome" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/hexo-blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Welcome</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/hexo-blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/hexo-blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/hexo-blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/hexo-blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/rulerofterabithia" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2022/04/22/%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E6%A0%B8%E5%BF%83%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2022/04/22/%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E6%A0%B8%E5%BF%83%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-22 21:20:45" itemprop="dateCreated datePublished" datetime="2022-04-22T21:20:45+08:00">2022-04-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-05-25 16:32:35" itemprop="dateModified" datetime="2022-05-25T16:32:35+08:00">2022-05-25</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2022/04/22/%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E6%A0%B8%E5%BF%83%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2022/04/22/%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E6%A0%B8%E5%BF%83%E4%B8%9A%E5%8A%A1%E5%AE%9E%E7%8E%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>76k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1:09</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>title: 谷粒学院核心业务实现<br>date: 2022-04-22 21:20:45<br>tags: 在线教育</p>
<h1 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h1><h2 id="1-基本概述"><a href="#1-基本概述" class="headerlink" title="1. 基本概述"></a>1. 基本概述</h2><p>在线教育顾名思义，是以网络为介质的教学方式，通过网络，学员与教师即使相隔万里也可以开展教学活动；此外，借助网络课件，学员还可以随时随地地进行学习，真正打破了时间和空间地限制，对于工作繁忙，学习时间不固定的职场人而言网络远程教育是最方便不过的学习方式</p>
<h2 id="2-发展潜力"><a href="#2-发展潜力" class="headerlink" title="2. 发展潜力"></a>2. 发展潜力</h2><p>所有人离不开教育：早期教育、课外辅导、少儿英语、职业教育、出国留学、商学院、移民服务……而在信息化爆发式发展的趋势下，在线教育越来越凸显出优势：</p>
<p>（1）在线教育可以突破时间和空间的限制，提升了学习效率；</p>
<p>（2）在线教育可以跨越因地域等方面造成的教育资源不平等分配，使教育资源共享化，降低了学习的门槛</p>
<p>基于在线教育的特点和优势，网络学校受到越来越多人的认可，各类新兴的网校及相关网站也不断涌现。显然，这代表着网校已经逐渐走进大众生活并成为一种学习的主流趋势。因此很多人开始选择在线教育，特别是白领一族和大学生们。仅2012年一年，中国在线教育市场份额已经达到723亿元，且在线教育用户呈规模性放大。</p>
<h2 id="3-适用行业"><a href="#3-适用行业" class="headerlink" title="3. 适用行业"></a>3. 适用行业</h2><p>具体来说在线培训学习系统可适合于：</p>
<p>（1）政府：现今我们的政府也提倡学习型组织，不断变化的政策环境、不断出现的新事物对政府公务员提出了更高的要求，而且政府机构的网络资源较佳，“在线培训系统”对公务员学习新知识和提高素质有很大帮助，更关键的是政府机构是垂直管理体制，只要在一个领域中创建并维护一套知识库，就可以让整个领域共享这宝贵的知识财富。</p>
<p>（2）学校：随着网络的兴起，各大中学校可通过建立网上学校，加强学校、老师、学生之间的相互交流沟通，提高教学质量，亦可建立公共教学资源库，建设精品课程，宣传学校的教育实力。</p>
<p>（3）行业：许多行业知识库体系庞大，专业多且层次深，因此行业一直注重知识和经验的积累，但这些宝贵的知识财富散落在各地，并没有利用和共享，因此，充分利用现有资源就能够创建一套丰富的知识库体系，让整个行业受益。</p>
<p>（4）企业：企业的知识库体系通常是企业的核心竞争力，使用“在线教育培训系统”，企业能够创建自己的知识库体系，并允许企业内部员工随时随地学习和分享这些知识。不断提升的员工素质和不断积累的企业知识库是企业能够保持长久的竞争力的关键。对于大型企业，还可以为合作伙伴及客户创建远程学习平台，提升和考核合作伙伴的专业技能并降低服务和支持成本。</p>
<h2 id="4-行业分类"><a href="#4-行业分类" class="headerlink" title="4. 行业分类"></a>4. 行业分类</h2><p>（1）母婴，代表网站：妈妈网</p>
<p>（2）学前教育，代表网站：宝宝巴士</p>
<p>（3）少儿外语，代表网站：VIPKID</p>
<p>（4）中小学生，代表网站：学而思</p>
<p>（5）高校学生，代表网站：中国大学慕课、学堂在线</p>
<p>（6）留学，代表网站：启德考培</p>
<p>（7）职业考试，代表网站：中公教育</p>
<p>（8）职业技能，代表网站：51CTO</p>
<p>（9）成人外语，代表网站：沪江网校</p>
<p>（10）个人兴趣，代表网站：美食杰</p>
<h1 id="八种商业模式"><a href="#八种商业模式" class="headerlink" title="八种商业模式"></a>八种商业模式</h1><h2 id="1-B2C模式（Business-To-Customer-会员模式）"><a href="#1-B2C模式（Business-To-Customer-会员模式）" class="headerlink" title="1. B2C模式（Business To Customer 会员模式）"></a>1. B2C模式（Business To Customer 会员模式）</h2><p>商家到用户，这种模式是自己制作大量自有版权的视频，放在自有平台上，让用户按月付费或者按年付费。 这种模式简单，快速，只要专心录制大量视频即可快速发展，其曾因为lynda的天价融资而大热。但在中国由于版权保护意识不强，教育内容易于复制，有海量的免费资源的竞争对手众多等原因，难以取得像样的现金流，<strong>谷粒学院所采用的就是B2C模式</strong></p>
<h2 id="2-C2C模式（Consumer-To-Consumer-平台模式-）"><a href="#2-C2C模式（Consumer-To-Consumer-平台模式-）" class="headerlink" title="2. C2C模式（Consumer To Consumer 平台模式 ）"></a>2. C2C模式（Consumer To Consumer 平台模式 ）</h2><p>用户到用户，这种模式本质是将自己的流量或者用户转卖给视频或者直播的内容提供者，通过出售内容分成获利。平台模式避开了非常沉重的内容和服务，扩张迅速，但实际这种模式也有缺陷，在线教育这两年的发展使内容迅速贬值，比较难带来更免费用户和流量</p>
<h2 id="3-B2B2C（商家到商家到用户）"><a href="#3-B2B2C（商家到商家到用户）" class="headerlink" title="3. B2B2C（商家到商家到用户）"></a>3. B2B2C（商家到商家到用户）</h2><p>平台链接第三方教育机构和用户，平台一般不直接提供课程内容，而是更多承担教育的互联网载体角色，为教学过程各个环节提供全方位支持和服务</p>
<h2 id="4-垂直领域"><a href="#4-垂直领域" class="headerlink" title="4. 垂直领域"></a>4. 垂直领域</h2><p>这种模式需要糅合录播，直播，帮助服务等多种手段，对学生学习某一项内容负责。这种模式收费高，有较强的壁垒。这种产品一旦形成口碑，会有稳定的用户群和收入，但产品非常复杂，难度大，门槛高，即使单独一个项目都会耗费大量的人力物力，因此发展速度较慢</p>
<h2 id="5-直播和互动"><a href="#5-直播和互动" class="headerlink" title="5. 直播和互动"></a>5. 直播和互动</h2><p>这种模式将传统课堂上的反馈，交互，答疑搬到线上。让用户容易接受，只要服务贴心，用 户就愿意买单，因此有丰富现金流。但缺陷是只能通过平台吸引用户，造成了竞争门槛过低， 模式雷同，对手众多，收益的永远是拥有流量或者用户的大平台</p>
<h2 id="6-1-对-1"><a href="#6-1-对-1" class="headerlink" title="6. 1 对 1"></a>6. 1 对 1</h2><p>让一个讲师在一定时间内对一个学员进行辅导，学生按照时间支付费用。这种模式收费容易， 现金流好，产品难度不大，市场空间大，但是人力资源的获取消耗却是巨大的，如果师资上控制不好，比如优秀的讲师留不住，或者整体成本太大，都会导致 1 对 1 模式难以发展</p>
<h2 id="7-O2O-模式（Online-To-Offline-线上到线下）"><a href="#7-O2O-模式（Online-To-Offline-线上到线下）" class="headerlink" title="7. O2O 模式（Online To Offline 线上到线下）"></a>7. O2O 模式（Online To Offline 线上到线下）</h2><p>就是通过免费内容或者运营，让线上平台获取用户和流量，将用户吸引到线下开课，或 者让学员到加盟的线下机构上课。这种模式形式简单，收益高，只要把控用户需求，吸引到用户，收费不成问题，而且符合传统的消费习惯</p>
<h2 id="8-freemium（免费增值）"><a href="#8-freemium（免费增值）" class="headerlink" title="8. freemium（免费增值）"></a>8. freemium（免费增值）</h2><p>Freemium最早由AVC的Fred Wilson在2006年提出, 指的是用免费服务吸引用户，然后通过增值服务，将部分免费用户转化为收费用户，实现变现。Freemium模式中有“二八定律”的因素，即一小部分对价格不敏感的高端用户，愿意为一些额 外的功能付费，为服务提供者带来大部分收入</p>
<h1 id="项目功能模块"><a href="#项目功能模块" class="headerlink" title="项目功能模块"></a>项目功能模块</h1><h2 id="1-系统后台部分（管理员使用）"><a href="#1-系统后台部分（管理员使用）" class="headerlink" title="1. 系统后台部分（管理员使用）"></a>1. 系统后台部分（管理员使用）</h2><p><strong>1、讲师管理模块</strong></p>
<p><strong>2、课程分类管理</strong></p>
<p><strong>3、课程管理模块</strong></p>
<p><strong>4、统计分析模块</strong></p>
<p><strong>5、订单管理</strong></p>
<p><strong>6、banner管理</strong></p>
<p>7、权限管理（由于该课程的权限管理讲得过于稀烂，在这里不再实现此功能）</p>
<h2 id="2-系统前台（普通用户使用）"><a href="#2-系统前台（普通用户使用）" class="headerlink" title="2. 系统前台（普通用户使用）"></a>2. 系统前台（普通用户使用）</h2><p><strong>1、首页数据显示</strong></p>
<p><strong>2、讲师列表和详情</strong></p>
<p><strong>3、课程列表和课程详情</strong></p>
<p><strong>4、登录和注册功能</strong></p>
<p><strong>5、微信扫码登录</strong></p>
<p><strong>6、微信扫码支付</strong></p>
<h1 id="项目技术点"><a href="#项目技术点" class="headerlink" title="项目技术点"></a>项目技术点</h1><h2 id="1-后端技术"><a href="#1-后端技术" class="headerlink" title="1. 后端技术"></a>1. 后端技术</h2><p><strong>SpringBoot、SpringCloud、MyBatisPlus、</strong>SpringSecurity、<strong>Redis、Maven、EasyExcel、JWT、OAuth2</strong></p>
<h2 id="2-前端技术"><a href="#2-前端技术" class="headerlink" title="2. 前端技术"></a>2. 前端技术</h2><p><strong>Vue、Element-UI、Axios、Node.js</strong> ……</p>
<h2 id="3-其他技术"><a href="#3-其他技术" class="headerlink" title="3. 其他技术"></a>3. 其他技术</h2><p><strong>阿里云oss、阿里云视频点播服务、腾讯云短信服务、微信支付和登录</strong>、Docker、Jenkins、<strong>Git</strong></p>
<h1 id="前后端分离"><a href="#前后端分离" class="headerlink" title="前后端分离"></a>前后端分离</h1><h2 id="1-什么是前后端分离"><a href="#1-什么是前后端分离" class="headerlink" title="1. 什么是前后端分离"></a>1. 什么是前后端分离</h2><p>前后端分离是目前一种非常流行的开发模式，它使项目的分工更加明确</p>
<ul>
<li><p>前端：负责显示数据</p>
</li>
<li><p>后端：负责处理、存储数据</p>
</li>
</ul>
<p>前端和后端开发人员通过<strong>接口</strong>进行数据的交换</p>
<h2 id="2-流程"><a href="#2-流程" class="headerlink" title="2. 流程"></a>2. 流程</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193100.png"></p>
<p><a href="%5B%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E4%BB%8B%E7%BB%8D_dakesong%E7%9A%84%E5%8D%9A%E5%AE%A2-CSDN%E5%8D%9A%E5%AE%A2_%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%5D(https://blog.csdn.net/weixin_45774195/article/details/107938967)">参考博客</a></p>
<h1 id="项目准备工作"><a href="#项目准备工作" class="headerlink" title="项目准备工作"></a>项目准备工作</h1><h2 id="1-数据库设计"><a href="#1-数据库设计" class="headerlink" title="1. 数据库设计"></a>1. 数据库设计</h2><p>数据库设计规约：</p>
<p>以下规约只针对本模块，更全面的文档参考《阿里巴巴Java开发手册》：五、MySQL数据库</p>
<p>1、库名与应用名称尽量一致</p>
<p>2、表名、字段名必须使用小写字母或数字，禁止出现数字开头，</p>
<p>3、表名不使用复数名词</p>
<p>4、表的命名最好是加上“业务名称_表的作用”。如，edu_teacher</p>
<p>5、表必备三字段：id, gmt_create, gmt_modified</p>
<p>说明：</p>
<p>其中 id 必为主键，类型为 bigint unsigned、单表时自增、步长为 1。</p>
<p>（如果使用分库分表集群部署，则id类型为verchar，非自增，业务中使用分布式id生成器）</p>
<p>gmt_create, gmt_modified 的类型均为 datetime 类型，前者现在时表示主动创建，后者过去分词表示被 动更新。 </p>
<p>6、单表行数超过 500 万行或者单表容量超过 2GB，才推荐进行分库分表。 说明：如果预计三年后的数据量根本达不到这个级别，请不要在创建表时就分库分表。 </p>
<p>7、表达是与否概念的字段，必须使用 is_xxx 的方式命名，数据类型是 unsigned tinyint （1 表示是，0 表示否）。 </p>
<p>说明：任何字段如果为非负数，必须是 unsigned。 </p>
<p>注意：POJO 类中的任何布尔类型的变量，都不要加 is 前缀。数据库表示是与否的值，使用 tinyint 类型，坚持 is_xxx 的 命名方式是为了明确其取值含义与取值范围。 </p>
<p>正例：表达逻辑删除的字段名 is_deleted，1 表示删除，0 表示未删除。 </p>
<p>8、小数类型为 decimal，禁止使用 float 和 double。 说明：float 和 double 在存储的时候，存在精度损失的问题，很可能在值的比较时，得到不 正确的结果。如果存储的数据范围超过 decimal 的范围，建议将数据拆成整数和小数分开存储。</p>
<p>9、如果存储的字符串长度几乎相等，使用 char 定长字符串类型。 </p>
<p>10、varchar 是可变长字符串，不预先分配存储空间，长度不要超过 5000，如果存储长度大于此值，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索 引效率。</p>
<p>11、唯一索引名为 uk_字段名；普通索引名则为 idx_字段名。</p>
<p>说明：uk_ 即 unique key；idx_ 即 index 的简称</p>
<p>12、不得使用外键与级联，一切外键概念必须在应用层解决。外键与级联更新适用于单机低并发，不适合分布式、高并发集群；级联更新是强阻塞，存在数据库更新风暴的风险；外键影响数据库的插入速度。 </p>
<h2 id="2-搭建项目工程（父工程）"><a href="#2-搭建项目工程（父工程）" class="headerlink" title="2. 搭建项目工程（父工程）"></a>2. 搭建项目工程（父工程）</h2><p>项目工程结构：</p>
<p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193143.png"></p>
<h1 id="讲师管理后端"><a href="#讲师管理后端" class="headerlink" title="讲师管理后端"></a>讲师管理后端</h1><h2 id="1-创建数据库和表"><a href="#1-创建数据库和表" class="headerlink" title="1. 创建数据库和表"></a>1. 创建数据库和表</h2><blockquote>
<p>guli_edu.sql</p>
</blockquote>
<h2 id="2-配置文件"><a href="#2-配置文件" class="headerlink" title="2. 配置文件"></a>2. 配置文件</h2><p>service_edu模块配置文件</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 端口号</span></span><br><span class="line"><span class="meta">server.port</span>=<span class="string">8001</span></span><br><span class="line"><span class="comment"># 服务名</span></span><br><span class="line"><span class="meta">spring.application.name</span>=<span class="string">service-edu</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 环境设置：dev、test、prod</span></span><br><span class="line"><span class="meta">spring.profiles.active</span>=<span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mysql数据库连接</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/guli_academy?serverTimezone=GMT%2B8&amp;useUnicode=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">123456</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># mybatis日志</span></span><br><span class="line"><span class="comment">#mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 返回json的全局时间格式</span></span><br><span class="line"><span class="meta">spring.jackson.date-format</span>=<span class="string">yyyy-MM-dd HH:mm:ss</span></span><br><span class="line"><span class="meta">spring.jackson.time-zone</span>=<span class="string">GMT+8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志级别</span></span><br><span class="line"><span class="comment">#logging.level.root=INFO</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置mapper.xml文件的路径</span></span><br><span class="line"><span class="meta">mybatis-plus.mapper-locations</span>=<span class="string">classpath:com/cyk/eduservice/mapper/xml/*.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nacos服务地址</span></span><br><span class="line"><span class="meta">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 开启熔断机制</span></span><br><span class="line"><span class="meta">feign.hystrix.enabled</span>=<span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置hystrix超时时间，默认1000ms</span></span><br><span class="line"><span class="meta">hystrix.command.default.execution.isolation.thread.timeoutInMilliseconds</span>=<span class="string">6000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.redis.host</span>=<span class="string">192.168.196.128</span></span><br><span class="line"><span class="meta">spring.redis.port</span>=<span class="string">6379</span></span><br><span class="line"><span class="meta">spring.redis.database</span>= <span class="string">0</span></span><br><span class="line"><span class="meta">spring.redis.timeout</span>=<span class="string">1800000</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-active</span>=<span class="string">20</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-wait</span>=<span class="string">-1</span></span><br><span class="line"><span class="comment">#最大阻塞等待时间(负数表示没限制)</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.max-idle</span>=<span class="string">5</span></span><br><span class="line"><span class="meta">spring.redis.lettuce.pool.min-idle</span>=<span class="string">0</span></span><br></pre></td></tr></table></figure>

<h2 id="3-代码生成器"><a href="#3-代码生成器" class="headerlink" title="3. 代码生成器"></a>3. 代码生成器</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CodeGenerator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1、创建代码生成器</span></span><br><span class="line">        AutoGenerator mpg = <span class="keyword">new</span> AutoGenerator();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2、全局配置</span></span><br><span class="line">        GlobalConfig gc = <span class="keyword">new</span> GlobalConfig();</span><br><span class="line">        String projectPath = System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        gc.setOutputDir(<span class="string">&quot;D:\\Workspace\\IDEAworkspace\\guli_academy\\guli_parent\\service\\service_edu&quot;</span> + <span class="string">&quot;/src/main/java&quot;</span>);</span><br><span class="line"></span><br><span class="line">        gc.setAuthor(<span class="string">&quot;cyk&quot;</span>);</span><br><span class="line">        gc.setOpen(<span class="keyword">false</span>); <span class="comment">//生成后是否打开资源管理器</span></span><br><span class="line">        gc.setFileOverride(<span class="keyword">false</span>); <span class="comment">//重新生成时文件是否覆盖</span></span><br><span class="line">        gc.setServiceName(<span class="string">&quot;%sService&quot;</span>);    <span class="comment">//去掉Service接口的首字母I</span></span><br><span class="line">        gc.setIdType(IdType.ID_WORKER_STR); <span class="comment">//主键策略</span></span><br><span class="line">        gc.setDateType(DateType.ONLY_DATE);<span class="comment">//定义生成的实体类中日期类型</span></span><br><span class="line">        gc.setSwagger2(<span class="keyword">true</span>);<span class="comment">//开启Swagger2模式</span></span><br><span class="line"></span><br><span class="line">        mpg.setGlobalConfig(gc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3、数据源配置</span></span><br><span class="line">        DataSourceConfig dsc = <span class="keyword">new</span> DataSourceConfig();</span><br><span class="line">        dsc.setUrl(<span class="string">&quot;jdbc:mysql://localhost:3306/guli_academy?serverTimezone=GMT%2B8&quot;</span>);</span><br><span class="line">        dsc.setDriverName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">        dsc.setUsername(<span class="string">&quot;root&quot;</span>);</span><br><span class="line">        dsc.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        dsc.setDbType(DbType.MYSQL);</span><br><span class="line">        mpg.setDataSource(dsc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4、包配置</span></span><br><span class="line">        PackageConfig pc = <span class="keyword">new</span> PackageConfig();</span><br><span class="line">        pc.setModuleName(<span class="string">&quot;eduservice&quot;</span>); <span class="comment">//模块名</span></span><br><span class="line">        pc.setParent(<span class="string">&quot;com.cyk&quot;</span>);</span><br><span class="line">        pc.setController(<span class="string">&quot;controller&quot;</span>);</span><br><span class="line">        pc.setEntity(<span class="string">&quot;entity&quot;</span>);</span><br><span class="line">        pc.setService(<span class="string">&quot;service&quot;</span>);</span><br><span class="line">        pc.setMapper(<span class="string">&quot;mapper&quot;</span>);</span><br><span class="line">        mpg.setPackageInfo(pc);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5、策略配置</span></span><br><span class="line">        StrategyConfig strategy = <span class="keyword">new</span> StrategyConfig();</span><br><span class="line">        strategy.setInclude(<span class="string">&quot;edu_comment&quot;</span>);</span><br><span class="line">        strategy.setNaming(NamingStrategy.underline_to_camel);<span class="comment">//数据库表映射到实体的命名策略</span></span><br><span class="line">        strategy.setTablePrefix(pc.getModuleName() + <span class="string">&quot;_&quot;</span>); <span class="comment">//生成实体时去掉表前缀</span></span><br><span class="line"></span><br><span class="line">        strategy.setColumnNaming(NamingStrategy.underline_to_camel);<span class="comment">//数据库表字段映射到实体的命名策略</span></span><br><span class="line">        strategy.setEntityLombokModel(<span class="keyword">true</span>); <span class="comment">// lombok 模型 @Accessors(chain = true) setter链式操作</span></span><br><span class="line"></span><br><span class="line">        strategy.setRestControllerStyle(<span class="keyword">true</span>); <span class="comment">//restful api风格控制器</span></span><br><span class="line">        strategy.setControllerMappingHyphenStyle(<span class="keyword">true</span>); <span class="comment">//url中驼峰转连字符</span></span><br><span class="line"></span><br><span class="line">        mpg.setStrategy(strategy);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 6、执行</span></span><br><span class="line">        mpg.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-讲师管理功能"><a href="#4-讲师管理功能" class="headerlink" title="4. 讲师管理功能"></a>4. 讲师管理功能</h2><h3 id="4-1-查询讲师表的所有功能"><a href="#4-1-查询讲师表的所有功能" class="headerlink" title="4.1 查询讲师表的所有功能"></a>4.1 查询讲师表的所有功能</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EduTeacherService teacherService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiOperation(value = &quot;所有讲师列表&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;findAll&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">findAllTeacher</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//调用service的方法实现查询所有的操作</span></span><br><span class="line">	List&lt;EduTeacher&gt; list = teacherService.list(<span class="keyword">null</span>);</span><br><span class="line">	<span class="keyword">return</span> R.ok().data(<span class="string">&quot;items&quot;</span>, list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-逻辑删除讲师"><a href="#4-2-逻辑删除讲师" class="headerlink" title="4.2 逻辑删除讲师"></a>4.2 逻辑删除讲师</h3><ol>
<li>配置mybatisplus逻辑删除插件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//逻辑删除插件</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> ISqlInjector <span class="title">sqlInjector</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> LogicSqlInjector();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在EduTeacher中的isDelete属性上添加逻辑删除注解@TableLogic</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty(value = &quot;逻辑删除 1（true）已删除， 0（false）未删除&quot;)</span></span><br><span class="line"><span class="meta">@TableLogic</span></span><br><span class="line"><span class="keyword">private</span> Boolean isDeleted;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>编写EduTeacherController中的方法</p>
<p>@PathVariable String id代表获取路径中的参数id</p>
<p>删除直接调用EduTeacherService中的方法即可</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2、逻辑删除讲师的方法</span></span><br><span class="line"><span class="meta">@ApiOperation(value = &quot;逻辑删除讲师&quot;)</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">removeTeacher</span><span class="params">(<span class="meta">@ApiParam(name = &quot;id&quot;, value = &quot;讲师id&quot;, required = true)</span></span></span></span><br><span class="line"><span class="function"><span class="params">                       <span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> flag = teacherService.removeById(id);</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>整合swagger</p>
<p>（1）由于普通浏览器无法通过在地址栏输入url测试@DeleteMapping、@UpdataMapping等请求，所以需要整合swagger或其他程序进行接口测试</p>
<p>（2）swagger的功能：①生成在线接口文档 ②方便接口测试</p>
<p>（3）为了所有的模块都能进行使用</p>
<p>SwaggerConfig：</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span><span class="comment">//配置类</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">//Swagger注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SwaggerConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Docket <span class="title">webApiConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Docket(DocumentationType.SWAGGER_2)</span><br><span class="line">                .groupName(<span class="string">&quot;webApi&quot;</span>)</span><br><span class="line">                .apiInfo(webApiInfo())</span><br><span class="line">                .select()</span><br><span class="line"><span class="comment">//                .paths(Predicates.not(PathSelectors.regex(&quot;/admin/.*&quot;)))</span></span><br><span class="line">                .paths(Predicates.not(PathSelectors.regex(<span class="string">&quot;/error.*&quot;</span>)))</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> ApiInfo <span class="title">webApiInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ApiInfoBuilder()</span><br><span class="line">                .title(<span class="string">&quot;谷粒学院测试&quot;</span>)</span><br><span class="line">                .description(<span class="string">&quot;本文档描述了课程中心微服务接口定义&quot;</span>)</span><br><span class="line">                .version(<span class="string">&quot;1.0&quot;</span>)</span><br><span class="line">                .contact(<span class="keyword">new</span> Contact(<span class="string">&quot;cyk&quot;</span>, <span class="string">&quot;https://github.com/rulerofterabithia&quot;</span>, <span class="string">&quot;caiyongkangofficial@gmail.com&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>为了能够让启动类扫描到swagger配置类，需要在service_edu的启动类上加上@ComponentScan(basePackages = {“com.cyk”})注解 </li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ComponentScan(basePackages = &#123;&quot;com.cyk&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EduApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EduApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-统一返回数据格式"><a href="#4-3-统一返回数据格式" class="headerlink" title="4.3 统一返回数据格式"></a>4.3 统一返回数据格式</h3><ol>
<li><p>项目中我们会将相应封装成json返回，一般我们会将所有接口的数据格式统一，使前端（IOS、Android、Web）对数据的操作更一致、轻松</p>
</li>
<li><p>json的数据格式：对象、数组，大多数情况下都是两种格式混合使用</p>
</li>
<li><p>一般情况下，统一返回数据格式没有固定的格式，只要能够描述清楚返回的数据状态以及返回的具体数据就可以。但是一般会包含状态码、返回消息、数据这几部分内容</p>
</li>
<li><p>例如，我们的系统要求返回的基本数据格式如下：</p>
</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;code&quot;</span>: <span class="number">20000</span>,</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;成功&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;total&quot;</span>: <span class="number">17</span>,</span><br><span class="line">    <span class="attr">&quot;rows&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;刘德华&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;intro&quot;</span>: <span class="string">&quot;毕业于师范大学数学系，热爱教育事业，执教数学思维6年有余&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当没有返回数据时：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;success&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;code&quot;</span>: <span class="number">20000</span>,</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;成功&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>失败时：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;success&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;code&quot;</span>: <span class="number">20001</span>,</span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;失败&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因此、统一定义返回数据格式为：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;success&quot;</span>: 布尔, <span class="comment">//响应是否成功</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span>: 数字, <span class="comment">//响应码</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span>: 字符串, <span class="comment">//返回消息</span></span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: HashMap <span class="comment">//返回数据，放在键值对中</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>自定义返回状态码</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ResultCode</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Integer SUCCESS = <span class="number">20000</span>;<span class="comment">//成功</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Integer ERROR = <span class="number">20001</span>;<span class="comment">//失败</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>定义返回数据格式</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//统一返回结果的类</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">R</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;是否成功&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Boolean success;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;返回码&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;返回消息&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;返回数据&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; data = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//把构造方法私有</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">R</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//成功静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">ok</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.setSuccess(<span class="keyword">true</span>);</span><br><span class="line">        r.setCode(ResultCode.SUCCESS);</span><br><span class="line">        r.setMessage(<span class="string">&quot;成功&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//失败静态方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> R <span class="title">error</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        R r = <span class="keyword">new</span> R();</span><br><span class="line">        r.setSuccess(<span class="keyword">false</span>);</span><br><span class="line">        r.setCode(ResultCode.ERROR);</span><br><span class="line">        r.setMessage(<span class="string">&quot;失败&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">success</span><span class="params">(Boolean success)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setSuccess(success);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">message</span><span class="params">(String message)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setMessage(message);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">code</span><span class="params">(Integer code)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setCode(code);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">data</span><span class="params">(String key, Object value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data.put(key, value);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">data</span><span class="params">(Map&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setData(map);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-分页查询讲师"><a href="#4-4-分页查询讲师" class="headerlink" title="4.4 分页查询讲师"></a>4.4 分页查询讲师</h3><ol>
<li>配置mybatisplus分页插件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分页插件</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PaginationInterceptor <span class="title">paginationInterceptor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> PaginationInterceptor();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>编写讲师分页查询接口的方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//3、分页查询讲师的方法</span></span><br><span class="line"><span class="comment">//current代表当前页，limit代表每页的记录数</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;pageTeacher/&#123;current&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">pageListTeacher</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">long</span> current, <span class="meta">@PathVariable</span> <span class="keyword">long</span> limit)</span> </span>&#123;</span><br><span class="line"><span class="comment">//创建Page对象</span></span><br><span class="line">Page&lt;EduTeacher&gt; pageTeacher = <span class="keyword">new</span> Page&lt;&gt;(current, limit);</span><br><span class="line"><span class="comment">//调用方法实现分页</span></span><br><span class="line"><span class="comment">//调用方法的时候，底层会封装，把分页的所有数据封装到pageTeacher对象里面</span></span><br><span class="line">teacherService.page(pageTeacher, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> total = pageTeacher.getTotal();<span class="comment">//总记录数</span></span><br><span class="line">List&lt;EduTeacher&gt; records = pageTeacher.getRecords();<span class="comment">//数据list集合</span></span><br><span class="line"><span class="keyword">return</span> R.ok().data(<span class="string">&quot;total&quot;</span>, total).data(<span class="string">&quot;rows&quot;</span>, records);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-5-多条件组合查询讲师带分页"><a href="#4-5-多条件组合查询讲师带分页" class="headerlink" title="4.5 多条件组合查询讲师带分页"></a>4.5 多条件组合查询讲师带分页</h3><ol>
<li>把条件值传递到接口里面去，具体实现方式：把条件值封装到对象里面，再把对象传递到接口里面</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//TeacherQuery用于封装条件</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeacherQuery</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;教师名称，模糊查询&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;头衔 1高级讲师 2首席讲师&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer level;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;查询开始时间&quot;, example = &quot;2019-01-01 10:10:10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String begin;<span class="comment">//注意，这里使用的是String类型，前端传过来的值无需进行类型转换</span></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;查询时间结束&quot;, example = &quot;2019-12-01 10:10:10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String end;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在EduTeacherController中编写方法，根据条件值判断是否为空，不为空则拼接条件</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//4、条件查询带分页的方法</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;pageTeacherCondition/&#123;current&#125;/&#123;limit&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">pageTeacherCondition</span><span class="params">(<span class="meta">@PathVariable</span> <span class="keyword">long</span> current,</span></span></span><br><span class="line"><span class="function"><span class="params">                              <span class="meta">@PathVariable</span> <span class="keyword">long</span> limit,</span></span></span><br><span class="line"><span class="function"><span class="params">                              <span class="meta">@RequestBody(required = false)</span> TeacherQuery teacherQuery)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//创建page对象</span></span><br><span class="line">    Page&lt;EduTeacher&gt; pageTeacher = <span class="keyword">new</span> Page&lt;&gt;(current, limit);</span><br><span class="line">    <span class="comment">//构建条件</span></span><br><span class="line">    QueryWrapper&lt;EduTeacher&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    <span class="comment">//多条件组合查询</span></span><br><span class="line">    String name = teacherQuery.getName();</span><br><span class="line">    Integer level = teacherQuery.getLevel();</span><br><span class="line">    String begin = teacherQuery.getBegin();</span><br><span class="line">    String end = teacherQuery.getEnd();</span><br><span class="line">    <span class="comment">//判断条件值是否为空，如果不为空拼接条件</span></span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(name)) &#123;</span><br><span class="line">        <span class="comment">//构建条件</span></span><br><span class="line">        wrapper.like(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(level)) &#123;</span><br><span class="line">        <span class="comment">//构建条件</span></span><br><span class="line">        wrapper.eq(<span class="string">&quot;level&quot;</span>, level);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(begin)) &#123;</span><br><span class="line">        <span class="comment">//构建条件</span></span><br><span class="line">        wrapper.ge(<span class="string">&quot;gmt_create&quot;</span>, begin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(end)) &#123;</span><br><span class="line">        <span class="comment">//构建条件</span></span><br><span class="line">        wrapper.le(<span class="string">&quot;gmt_create&quot;</span>, end);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//排序</span></span><br><span class="line">    wrapper.orderByDesc(<span class="string">&quot;gmt_create&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用方法实现条件查询分页</span></span><br><span class="line">    teacherService.page(pageTeacher, wrapper);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> total = pageTeacher.getTotal();<span class="comment">//总记录数</span></span><br><span class="line">    List&lt;EduTeacher&gt; records = pageTeacher.getRecords();<span class="comment">//数据list集合</span></span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;total&quot;</span>, total).data(<span class="string">&quot;rows&quot;</span>, records);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>关于@ResponseBody和@RequestBody：</li>
</ol>
<p>@ResponseBody：主要作用是：在一般情况下，返回json格式的数据</p>
<p>@RequestBody：使用json传递数据，把前端的json数据封装到对应对象里面，RequestBody需要使用post提交方式</p>
<p>[参考博客](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/daimajun/p/7152970.html">@ResponseBody 和 @RequestBody 的作用 - 码上猿梦 - 博客园 (cnblogs.com)</a>)</p>
<h3 id="4-6-添加讲师"><a href="#4-6-添加讲师" class="headerlink" title="4.6 添加讲师"></a>4.6 添加讲师</h3><ol>
<li>设置创建时间和修改时间自动填充，添加@TableField注解</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ApiModelProperty(value = &quot;创建时间&quot;)</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Date gmtCreate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModelProperty(value = &quot;更新时间&quot;)</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> Date gmtModified;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>编写配置类</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title">MetaObjectHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//属性名称，不是字段名称</span></span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;gmtCreate&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;gmtModified&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFill</span><span class="params">(MetaObject metaObject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setFieldValByName(<span class="string">&quot;gmtModified&quot;</span>, <span class="keyword">new</span> Date(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在EduTeacherController中编写方法</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//5、添加讲师接口的方法</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;addTeacher&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">addTeacher</span><span class="params">(<span class="meta">@RequestBody</span> EduTeacher eduTeacher)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> save = teacherService.save(eduTeacher);</span><br><span class="line">    <span class="keyword">if</span> (save) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>7.4.7 讲师的修改功能</p>
<ol>
<li>需要先根据讲师id进行查询</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//6、根据讲师id进行查询</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getTeacher/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getTeacher</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">    EduTeacher eduTeacher = teacherService.getById(id);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;teacher&quot;</span>, eduTeacher);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改讲师</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//7、讲师修改功能</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;updateTeacher&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateTeacher</span><span class="params">(<span class="meta">@RequestBody</span> EduTeacher eduTeacher)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">boolean</span> flag = teacherService.updateById(eduTeacher);</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="统一异常处理"><a href="#统一异常处理" class="headerlink" title="统一异常处理"></a>统一异常处理</h1><h2 id="1-全局异常处理"><a href="#1-全局异常处理" class="headerlink" title="1. 全局异常处理"></a>1. 全局异常处理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    <span class="comment">//指定出现什么异常执行这个方法</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span><span class="comment">//为了返回数据</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(Exception e)</span> </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> R.error().message(<span class="string">&quot;执行了全局异常处理&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-特定异常处理"><a href="#2-特定异常处理" class="headerlink" title="2. 特定异常处理"></a>2. 特定异常处理</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//特定异常</span></span><br><span class="line"><span class="meta">@ExceptionHandler(ArithmeticException.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(ArithmeticException e)</span> </span>&#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    <span class="keyword">return</span> R.error().message(<span class="string">&quot;执行了ArithmeticException异常处理&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-自定义异常处理"><a href="#3-自定义异常处理" class="headerlink" title="3. 自定义异常处理"></a>3. 自定义异常处理</h2><h3 id="3-1-创建自定义异常类继承RuntimeException，编写异常属性"><a href="#3-1-创建自定义异常类继承RuntimeException，编写异常属性" class="headerlink" title="3.1 创建自定义异常类继承RuntimeException，编写异常属性"></a>3.1 创建自定义异常类继承RuntimeException，编写异常属性</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span> <span class="comment">//生成有参构造方法</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span> <span class="comment">//生成无参构造器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GuliException</span> <span class="keyword">extends</span> <span class="title">RuntimeException</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;<span class="comment">//异常状态码</span></span><br><span class="line">    <span class="keyword">private</span> String msg;<span class="comment">//异常信息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-在统一异常类添加规则"><a href="#3-2-在统一异常类添加规则" class="headerlink" title="3.2 在统一异常类添加规则"></a>3.2 在统一异常类添加规则</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义异常</span></span><br><span class="line"><span class="meta">@ExceptionHandler(GuliException.class)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">error</span><span class="params">(GuliException e)</span> </span>&#123;</span><br><span class="line">    log.error(e.getMessage());</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">    <span class="keyword">return</span> R.error().code(e.getCode()).message(e.getMsg());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-执行自定义异常示例"><a href="#3-3-执行自定义异常示例" class="headerlink" title="3.3 执行自定义异常示例"></a>3.3 执行自定义异常示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">//会出现异常的代码</span></span><br><span class="line">    <span class="keyword">int</span> <span class="number">1</span> / <span class="number">0</span>; </span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">    <span class="comment">//执行自定义异常</span></span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>,<span class="string">&quot;执行了自定义异常处理...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="统一日志处理"><a href="#统一日志处理" class="headerlink" title="统一日志处理"></a>统一日志处理</h1><h2 id="1-日志是干什么的？"><a href="#1-日志是干什么的？" class="headerlink" title="1. 日志是干什么的？"></a>1. 日志是干什么的？</h2><p>日志的作用：通过日志可以更好地观察到程序地运行状态，更快地定位到哪里出了问题</p>
<h2 id="2-日志级别"><a href="#2-日志级别" class="headerlink" title="2. 日志级别"></a>2. 日志级别</h2><p>OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL</p>
<p>默认的日志级别是INFO</p>
<h2 id="3-设置日志级别"><a href="#3-设置日志级别" class="headerlink" title="3. 设置日志级别"></a>3. 设置日志级别</h2><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置日志级别</span></span><br><span class="line"><span class="meta">logging.level.root</span>=<span class="string">INFO</span></span><br></pre></td></tr></table></figure>

<h2 id="4-使用logback日志工具，把日志不仅输出到控制台，也可以输出到文件中"><a href="#4-使用logback日志工具，把日志不仅输出到控制台，也可以输出到文件中" class="headerlink" title="4. 使用logback日志工具，把日志不仅输出到控制台，也可以输出到文件中"></a>4. 使用logback日志工具，把日志不仅输出到控制台，也可以输出到文件中</h2><p>第一步：删除applications.properties中的日志配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置日志级别</span></span><br><span class="line"><span class="comment">#logging.level.root=INFO</span></span><br><span class="line"><span class="comment"># mybatis日志</span></span><br><span class="line"><span class="comment">#mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></table></figure>

<p>第二步：在resources中创建logback-spring.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">scan</span>=<span class="string">&quot;true&quot;</span> <span class="attr">scanPeriod</span>=<span class="string">&quot;10 seconds&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 日志级别从低到高分为TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL，如果设置为WARN，则低于WARN的信息都不会输出 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- scan:当此属性设置为true时，配置文件如果发生改变，将会被重新加载，默认值为true --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- scanPeriod:设置监测配置文件是否有修改的时间间隔，如果没有给出时间单位，默认单位是毫秒。当scan为true时，此属性生效。默认的时间间隔为1分钟。 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- de<span class="doctag">bug:</span>当此属性设置为true时，将打印出logback内部日志信息，实时查看logback运行状态。默认值为false。 --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>logback<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- name的值是变量的名称，value的值时变量定义的值。通过定义的值会被插入到logger上下文中。定义变量后，可以使“$&#123;&#125;”来使用变量。 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;log.path&quot;</span> <span class="attr">value</span>=<span class="string">&quot;D:/download/guli_academy&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 彩色日志 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 配置格式变量：CONSOLE_LOG_PATTERN 彩色日志格式 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- magenta:洋红 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- boldMagenta:粗红--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- cyan:青色 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- white:白色 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- magenta:洋红 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE_LOG_PATTERN&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">value</span>=<span class="string">&quot;%yellow(%date&#123;yyyy-MM-dd HH:mm:ss&#125;) |%highlight(%-5level) |%blue(%thread) |%blue(%file:%line) |%green(%logger) |%cyan(%msg%n)&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--输出到控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;CONSOLE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--此日志appender是为开发使用，只配置最底级别，控制台输出的日志级别是大于或等于此级别的日志信息--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 例如：如果此处配置了INFO级别，则后面其他位置即使配置了DEBUG级别的日志，也不会被输出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class="tag">&lt;/<span class="name">Pattern</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置字符集 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--输出到文件--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 INFO 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;INFO_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_info.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 每天日志归档路径以及格式 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/info/log-info-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录info级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>INFO<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 WARN 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;WARN_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_warn.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 此处设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/warn/log-warn-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录warn级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>warn<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 时间滚动输出 level为 ERROR 日志 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;ERROR_FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 正在记录的日志文件的路径及文件名 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">file</span>&gt;</span>$&#123;log.path&#125;/log_error.log<span class="tag">&lt;/<span class="name">file</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--日志文件输出格式--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">charset</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">charset</span>&gt;</span> <span class="comment">&lt;!-- 此处设置字符集 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">fileNamePattern</span>&gt;</span>$&#123;log.path&#125;/error/log-error-%d&#123;yyyy-MM-dd&#125;.%i.log<span class="tag">&lt;/<span class="name">fileNamePattern</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">timeBasedFileNamingAndTriggeringPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>100MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">timeBasedFileNamingAndTriggeringPolicy</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--日志文件保留天数--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maxHistory</span>&gt;</span>15<span class="tag">&lt;/<span class="name">maxHistory</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 此日志文件只记录ERROR级别的 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>ERROR<span class="tag">&lt;/<span class="name">level</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMatch</span>&gt;</span>ACCEPT<span class="tag">&lt;/<span class="name">onMatch</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">onMismatch</span>&gt;</span>DENY<span class="tag">&lt;/<span class="name">onMismatch</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        &lt;logger&gt;用来设置某一个包或者具体的某一个类的日志打印级别、以及指定&lt;appender&gt;。</span></span><br><span class="line"><span class="comment">        &lt;logger&gt;仅有一个name属性，</span></span><br><span class="line"><span class="comment">        一个可选的level和一个可选的addtivity属性。</span></span><br><span class="line"><span class="comment">        name:用来指定受此logger约束的某一个包或者具体的某一个类。</span></span><br><span class="line"><span class="comment">        level:用来设置打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF，</span></span><br><span class="line"><span class="comment">              如果未设置此属性，那么当前logger将会继承上级的级别。</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        使用mybatis的时候，sql语句是debug下才会打印，而这里我们只配置了info，所以想要查看sql语句的话，有以下两种操作：</span></span><br><span class="line"><span class="comment">        第一种把&lt;root level=&quot;INFO&quot;&gt;改成&lt;root level=&quot;DEBUG&quot;&gt;这样就会打印sql，不过这样日志那边会出现很多其他消息</span></span><br><span class="line"><span class="comment">        第二种就是单独给mapper下目录配置DEBUG模式，代码如下，这样配置sql语句会打印，其他还是正常DEBUG级别：</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--开发环境:打印控制台--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;dev&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--可以输出项目中的debug日志，包括mybatis的sql日志--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.guli&quot;</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            root节点是必选节点，用来指定最基础的日志输出级别，只有一个level属性</span></span><br><span class="line"><span class="comment">            level:用来设置打印级别，大小写无关：TRACE, DEBUG, INFO, WARN, ERROR, ALL 和 OFF，默认是DEBUG</span></span><br><span class="line"><span class="comment">            可以包含零个或多个appender元素。</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR_FILE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--生产环境:输出到文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">springProfile</span> <span class="attr">name</span>=<span class="string">&quot;pro&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;INFO&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;CONSOLE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;DEBUG_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;INFO_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;ERROR_FILE&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;WARN_FILE&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">springProfile</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h1><p>前端的作用：通过ajax调用接口，得到数据，把数据做显示</p>
<p>axios：在vue中，发送ajax请求，请求接口，得到数据并显示</p>
<h2 id="1-Axios"><a href="#1-Axios" class="headerlink" title="1. Axios"></a>1. Axios</h2><h3 id="1-1-什么是axios"><a href="#1-1-什么是axios" class="headerlink" title="1.1 什么是axios"></a>1.1 什么是axios</h3><p>axios是独立的项目，不是vue里面的一部分，使用axios经常和vue一起使用，实现ajax操作</p>
<h3 id="1-2-使用axios应用场景"><a href="#1-2-使用axios应用场景" class="headerlink" title="1.2 使用axios应用场景"></a>1.2 使用axios应用场景</h3><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193415.png"></p>
<h2 id="2-Element-UI"><a href="#2-Element-UI" class="headerlink" title="2. Element-UI"></a>2. Element-UI</h2><p>element-ui是饿了么前端出品的基于Vue.js的后台组件库，方便程序员进行页面快速布局和构建</p>
<h2 id="3-Node-js"><a href="#3-Node-js" class="headerlink" title="3. Node.js"></a>3. Node.js</h2><h3 id="3-1-Node-js是什么"><a href="#3-1-Node-js是什么" class="headerlink" title="3.1 Node.js是什么"></a>3.1 Node.js是什么</h3><ol>
<li>之前学过Java，运行Java需要安装JDK环境，Node.js是JavaScript的运行环境，用于执行JavaScript代码，不需要浏览器，直接使用Node.js就可以运行JavaScript代码</li>
<li>可以模拟服务器效果，比如Tomcat</li>
</ol>
<h2 id="4-搭建前端环境"><a href="#4-搭建前端环境" class="headerlink" title="4. 搭建前端环境"></a>4. 搭建前端环境</h2><h3 id="4-1-下载vue-admin-template-master依赖"><a href="#4-1-下载vue-admin-template-master依赖" class="headerlink" title="4.1 下载vue-admin-template-master依赖"></a>4.1 下载vue-admin-template-master依赖</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h3 id="4-2-启动前端项目"><a href="#4-2-启动前端项目" class="headerlink" title="4.2 启动前端项目"></a>4.2 启动前端项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h3 id="4-3-在config-index-js下做修改"><a href="#4-3-在config-index-js下做修改" class="headerlink" title="4.3 在config/index.js下做修改"></a>4.3 在config/index.js下做修改</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useEslint: <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h3 id="4-4-在config-dev-env-js下修改访问后端接口地址，把登录请求地址改成本地"><a href="#4-4-在config-dev-env-js下修改访问后端接口地址，把登录请求地址改成本地" class="headerlink" title="4.4 在config/dev.env.js下修改访问后端接口地址，把登录请求地址改成本地"></a>4.4 在config/dev.env.js下修改访问后端接口地址，把登录请求地址改成本地</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BASE_API: <span class="string">&#x27;&quot;http://localhost:8001&quot;&#x27;</span>,</span><br></pre></td></tr></table></figure>

<h3 id="4-5-编写登录接口"><a href="#4-5-编写登录接口" class="headerlink" title="4.5 编写登录接口"></a>4.5 编写登录接口</h3><p>进行登录调用两个方法，login登录操作方法，和info登录之后获取用户信息的方法。所以，要创建接口将两个方法实现</p>
<p>（1）login返回token值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">Login</span>(<span class="params">&#123; commit &#125;, userInfo</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> username = userInfo.username.trim()</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            login(username, userInfo.password).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> data = response.data</span><br><span class="line">                    setToken(data.token)<span class="comment">//-----&gt;login返回token值</span></span><br><span class="line">                    commit(<span class="string">&#x27;SET_TOKEN&#x27;</span>, data.token)</span><br><span class="line">                    resolve()</span><br><span class="line">            &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">                reject(error)</span><br><span class="line">            &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//login</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;login&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">login</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;token&quot;</span>, <span class="string">&quot;admin&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）info返回roles、name、avatar</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取用户信息</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">GetInfo</span>(<span class="params">&#123; commit, state &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        getInfo(state.token).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// debugger</span></span><br><span class="line">            <span class="keyword">const</span> data = response.data</span><br><span class="line">            <span class="keyword">if</span> (data.roles &amp;&amp; data.roles.length &gt; <span class="number">0</span>) &#123;<span class="comment">//验证返回的roles是否是一个非空数组</span></span><br><span class="line">                commit(<span class="string">&#x27;SET_ROLES&#x27;</span>, data.roles)<span class="comment">//-----&gt;返回roles</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                reject(<span class="string">&#x27;getInfo: roles must be a non-null array !&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> buttonAuthList = []</span><br><span class="line">            data.permissionValueList.forEach(<span class="function"><span class="params">button</span> =&gt;</span> &#123;</span><br><span class="line">                buttonAuthList.push(button)</span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">            commit(<span class="string">&#x27;SET_NAME&#x27;</span>, data.name)<span class="comment">//-----&gt;返回name</span></span><br><span class="line">            commit(<span class="string">&#x27;SET_AVATAR&#x27;</span>, data.avatar)<span class="comment">//-----&gt;返回avatar</span></span><br><span class="line">            commit(<span class="string">&#x27;SET_BUTTONS&#x27;</span>, buttonAuthList)</span><br><span class="line">            resolve(response)</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            reject(error)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//info</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;info&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">info</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;roles&quot;</span>, <span class="string">&quot;admin&quot;</span>).data(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;admin&quot;</span>).data(<span class="string">&quot;avatar&quot;</span>, 			<span class="string">&quot;https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-6-修改src-api文件夹下的login-js文件修改成本地接口路径"><a href="#4-6-修改src-api文件夹下的login-js文件修改成本地接口路径" class="headerlink" title="4.6 修改src/api文件夹下的login.js文件修改成本地接口路径"></a>4.6 修改src/api文件夹下的login.js文件修改成本地接口路径</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">username, password</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/user/login&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">            username,</span><br><span class="line">            password</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">token</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/user/info&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        params: &#123; token &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-7-解决跨域问题"><a href="#4-7-解决跨域问题" class="headerlink" title="4.7 解决跨域问题"></a>4.7 解决跨域问题</h3><ol>
<li>什么是跨域？</li>
</ol>
<p>通过一个地址去访问另外一个地址，这个过程中如果以下<strong>三个地方</strong>中的任何一个不一样就会产生跨域问题</p>
<p><strong>*三个地方**：</strong>访问协议、ip地址、端口号**</p>
<p>（1）访问协议：http、https</p>
<p>（2）ip地址：192.168.1.1、172.11.11.11</p>
<p>（3）端口号：9528、8001</p>
<p>前端的地址是：<a target="_blank" rel="noopener" href="http://localhost:9528/">http://localhost:9528</a></p>
<p>后端登录接口的地址是：<a target="_blank" rel="noopener" href="http://localhost:8001/">http://localhost:8001</a></p>
<p>两个地址的协议、ip地址都相同，但是端口号不一样，所以会出现跨域问题</p>
<ol start="2">
<li>如何解决跨域</li>
</ol>
<p>方法一：在后端的controller上加上@controller注解（常用）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin</span> <span class="comment">//解决跨域问题</span></span><br></pre></td></tr></table></figure>

<p>方法二：使用gateway网关</p>
<h3 id="4-8-前端框架使用方法"><a href="#4-8-前端框架使用方法" class="headerlink" title="4.8 前端框架使用方法"></a>4.8 前端框架使用方法</h3><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193450.png"></p>
<h1 id="讲师管理前端"><a href="#讲师管理前端" class="headerlink" title="讲师管理前端"></a>讲师管理前端</h1><h2 id="1-讲师列表-条件查询带分页"><a href="#1-讲师列表-条件查询带分页" class="headerlink" title="1. 讲师列表-条件查询带分页"></a>1. 讲师列表-条件查询带分页</h2><h3 id="1-1-添加路由"><a href="#1-1-添加路由" class="headerlink" title="1.1 添加路由"></a>1.1 添加路由</h3><p>在src/router/index.js下添加路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//讲师管理</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/teacher&#x27;</span>,</span><br><span class="line">  component: Layout,</span><br><span class="line">  redirect: <span class="string">&#x27;/teacher/table&#x27;</span>,</span><br><span class="line">  name: <span class="string">&#x27;讲师管理&#x27;</span>,</span><br><span class="line">  meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;讲师管理&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;table&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;讲师列表&#x27;</span>,</span><br><span class="line">      component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/list&#x27;</span>),</span><br><span class="line">      meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;讲师列表&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;edit/:id&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;EduTeacherEdit&#x27;</span>,</span><br><span class="line">      component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),</span><br><span class="line">      meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;编辑讲师&#x27;</span>, <span class="attr">noCache</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      hidden: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="1-2-创建路由对应的页面"><a href="#1-2-创建路由对应的页面" class="headerlink" title="1.2 创建路由对应的页面"></a>1.2 创建路由对应的页面</h3><p>在views/edu/teacher下创建讲师列表页面list.vue</p>
<h3 id="1-3-定义访问的接口地址"><a href="#1-3-定义访问的接口地址" class="headerlink" title="1.3 定义访问的接口地址"></a>1.3 定义访问的接口地址</h3><p>在src/api/edu/teacher.js下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、讲师列表（条件查询分页）</span></span><br><span class="line"><span class="comment">//current当前页 limit每页记录数 teacherQuery条件对象</span></span><br><span class="line"><span class="function"><span class="title">getTeacherListPage</span>(<span class="params">current, limit, teacherQuery</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/teacher/pageTeacherCondition/<span class="subst">$&#123;current&#125;</span>/<span class="subst">$&#123;limit&#125;</span>`</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="comment">//teacherQuery条件对象，后端使用RequetBody获取数据</span></span><br><span class="line">        <span class="comment">//data表示把对象转换成json进行传递到接口里面</span></span><br><span class="line">        data: teacherQuery</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="1-4-调用接口得到数据"><a href="#1-4-调用接口得到数据" class="headerlink" title="1.4 调用接口得到数据"></a>1.4 调用接口得到数据</h3><p>在list.vue讲师列表页面调用定义的接口的方法，得到接口返回的数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">//引入teacher.js文件</span></span><br><span class="line"><span class="keyword">import</span> teacher <span class="keyword">from</span> <span class="string">&quot;@/api/edu/teacher&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//写核心代码的位置</span></span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//定义变量和初始值</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      list: <span class="literal">null</span>, <span class="comment">//查询之后接口返回集合</span></span><br><span class="line">      page: <span class="number">1</span>, <span class="comment">//当前页</span></span><br><span class="line">      limit: <span class="number">10</span>, <span class="comment">//每页记录数</span></span><br><span class="line">      total: <span class="number">0</span>, <span class="comment">//总记录数</span></span><br><span class="line">      teacherQuery: &#123;&#125;, <span class="comment">//条件封装对象</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//在页面渲染之前执行，一般调用methods定义的方法</span></span><br><span class="line">    <span class="comment">//调用</span></span><br><span class="line">    <span class="built_in">this</span>.getList();</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">//创建具体的方法，调用teacher.js定义的方法</span></span><br><span class="line">    <span class="comment">//讲师列表的方法</span></span><br><span class="line">    <span class="function"><span class="title">getList</span>(<span class="params">page = <span class="number">1</span></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.page = page;</span><br><span class="line">      teacher</span><br><span class="line">        .getTeacherListPage(<span class="built_in">this</span>.page, <span class="built_in">this</span>.limit, <span class="built_in">this</span>.teacherQuery)</span><br><span class="line">        .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">//response接口返回的数据</span></span><br><span class="line">          <span class="comment">// console.log(response)</span></span><br><span class="line">          <span class="built_in">this</span>.list = response.data.rows;</span><br><span class="line">          <span class="built_in">this</span>.total = response.data.total;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="built_in">this</span>.list);</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="built_in">this</span>.total);</span><br><span class="line">        &#125;); <span class="comment">//表示成功</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">resetData</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">//清空的方法</span></span><br><span class="line">      <span class="comment">//1、表单输入项的数据的清空</span></span><br><span class="line">      <span class="built_in">this</span>.teacherQuery = &#123;&#125;;</span><br><span class="line">      <span class="comment">//2、查询所有讲师</span></span><br><span class="line">      <span class="built_in">this</span>.getList();</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-页面显示"><a href="#1-5-页面显示" class="headerlink" title="1.5 页面显示"></a>1.5 页面显示</h3><p>把请求接口获取到的数据在页面进行显示，使用element-ui实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;!--查询表单--&gt;</span><br><span class="line">    &lt;el-form :inline&#x3D;&quot;true&quot; class&#x3D;&quot;demo-form-inline&quot;&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-input v-model&#x3D;&quot;teacherQuery.name&quot; placeholder&#x3D;&quot;讲师名&quot; &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-select</span><br><span class="line">          v-model&#x3D;&quot;teacherQuery.level&quot;</span><br><span class="line">          clearable</span><br><span class="line">          placeholder&#x3D;&quot;讲师头衔&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;el-option :value&#x3D;&quot;1&quot; label&#x3D;&quot;高级讲师&quot; &#x2F;&gt;</span><br><span class="line">          &lt;el-option :value&#x3D;&quot;2&quot; label&#x3D;&quot;首席讲师&quot; &#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-select&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-form-item label&#x3D;&quot;添加时间&quot;&gt;</span><br><span class="line">        &lt;el-date-picker</span><br><span class="line">          v-model&#x3D;&quot;teacherQuery.begin&quot;</span><br><span class="line">          type&#x3D;&quot;datetime&quot;</span><br><span class="line">          placeholder&#x3D;&quot;选择开始时间&quot;</span><br><span class="line">          value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">          default-time&#x3D;&quot;00:00:00&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-date-picker</span><br><span class="line">          v-model&#x3D;&quot;teacherQuery.end&quot;</span><br><span class="line">          type&#x3D;&quot;datetime&quot;</span><br><span class="line">          placeholder&#x3D;&quot;选择截止时间&quot;</span><br><span class="line">          value-format&#x3D;&quot;yyyy-MM-dd HH:mm:ss&quot;</span><br><span class="line">          default-time&#x3D;&quot;00:00:00&quot;</span><br><span class="line">        &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-search&quot; @click&#x3D;&quot;getList()&quot;</span><br><span class="line">        &gt;查询&lt;&#x2F;el-button</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;el-button type&#x3D;&quot;default&quot; @click&#x3D;&quot;resetData()&quot;&gt;清空&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;el-form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 表格 --&gt;</span><br><span class="line">    &lt;el-table :data&#x3D;&quot;list&quot; border fit highlight-current-row&gt;</span><br><span class="line">      &lt;el-table-column label&#x3D;&quot;序号&quot; width&#x3D;&quot;70&quot; align&#x3D;&quot;center&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; (page - 1) * limit + scope.$index + 1 &#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;name&quot; label&#x3D;&quot;名称&quot; width&#x3D;&quot;80&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label&#x3D;&quot;头衔&quot; width&#x3D;&quot;80&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; scope.row.level &#x3D;&#x3D;&#x3D; 1 ? &quot;高级讲师&quot; : &quot;首席讲师&quot; &#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;intro&quot; label&#x3D;&quot;资历&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;gmtCreate&quot; label&#x3D;&quot;添加时间&quot; width&#x3D;&quot;160&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column prop&#x3D;&quot;sort&quot; label&#x3D;&quot;排序&quot; width&#x3D;&quot;60&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column label&#x3D;&quot;操作&quot; width&#x3D;&quot;200&quot; align&#x3D;&quot;center&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &lt;router-link :to&#x3D;&quot;&#39;&#x2F;teacher&#x2F;edit&#x2F;&#39; + scope.row.id&quot;&gt;</span><br><span class="line">            &lt;el-button type&#x3D;&quot;primary&quot; size&#x3D;&quot;mini&quot; icon&#x3D;&quot;el-icon-edit&quot;</span><br><span class="line">              &gt;修改&lt;&#x2F;el-button</span><br><span class="line">            &gt;</span><br><span class="line">          &lt;&#x2F;router-link&gt;</span><br><span class="line">          &lt;el-button</span><br><span class="line">            type&#x3D;&quot;danger&quot;</span><br><span class="line">            size&#x3D;&quot;mini&quot;</span><br><span class="line">            icon&#x3D;&quot;el-icon-delete&quot;</span><br><span class="line">            @click&#x3D;&quot;removeDataById(scope.row.id)&quot;</span><br><span class="line">            &gt;删除&lt;&#x2F;el-button</span><br><span class="line">          &gt;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line">    &lt;&#x2F;el-table&gt;</span><br><span class="line">    &lt;!-- 分页 --&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      :current-page&#x3D;&quot;page&quot;</span><br><span class="line">      :page-size&#x3D;&quot;limit&quot;</span><br><span class="line">      :total&#x3D;&quot;total&quot;</span><br><span class="line">      style&#x3D;&quot;padding: 30px 0; text-align: center&quot;</span><br><span class="line">      layout&#x3D;&quot;total, prev, pager, next, jumper&quot;</span><br><span class="line">      @current-change&#x3D;&quot;getList&quot;</span><br><span class="line">    &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-讲师删除"><a href="#2-讲师删除" class="headerlink" title="2. 讲师删除"></a>2. 讲师删除</h2><h3 id="2-1-添加按钮"><a href="#2-1-添加按钮" class="headerlink" title="2.1 添加按钮"></a>2.1 添加按钮</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label&#x3D;&quot;操作&quot; width&#x3D;&quot;200&quot; align&#x3D;&quot;center&quot;&gt;</span><br><span class="line">    &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">		&lt;router-link :to&#x3D;&quot;&#39;&#x2F;teacher&#x2F;edit&#x2F;&#39; + scope.row.id&quot;&gt;</span><br><span class="line">    		&lt;el-button type&#x3D;&quot;primary&quot; size&#x3D;&quot;mini&quot; icon&#x3D;&quot;el-icon-edit&quot;&gt;修改&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;router-link&gt;</span><br><span class="line">		&lt;el-button type&#x3D;&quot;danger&quot;</span><br><span class="line">           size&#x3D;&quot;mini&quot;</span><br><span class="line">           icon&#x3D;&quot;el-icon-delete&quot;</span><br><span class="line">           @click&#x3D;&quot;removeDataById(scope.row.id)&quot;&gt;删除&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;template&gt;</span><br><span class="line">&lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-在按钮上绑定事件"><a href="#2-2-在按钮上绑定事件" class="headerlink" title="2.2 在按钮上绑定事件"></a>2.2 在按钮上绑定事件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@click=<span class="string">&quot;removeDataById&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-在绑定事件的方法传递删除讲师"><a href="#2-3-在绑定事件的方法传递删除讲师" class="headerlink" title="2.3 在绑定事件的方法传递删除讲师"></a>2.3 在绑定事件的方法传递删除讲师</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@click=<span class="string">&quot;removeDataById(scope.row.id)&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-定义接口的地址"><a href="#2-4-定义接口的地址" class="headerlink" title="2.4 定义接口的地址"></a>2.4 定义接口的地址</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除讲师</span></span><br><span class="line"><span class="function"><span class="title">deleteTeacherById</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/teacher/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">        method: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="2-5-页面调用方法，实现删除"><a href="#2-5-页面调用方法，实现删除" class="headerlink" title="2.5 页面调用方法，实现删除"></a>2.5 页面调用方法，实现删除</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除讲师的方法</span></span><br><span class="line"><span class="function"><span class="title">removeDataById</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$confirm(<span class="string">&quot;此操作将永久删除讲师记录, 是否继续?&quot;</span>, <span class="string">&quot;提示&quot;</span>, &#123;</span><br><span class="line">        confirmButtonText: <span class="string">&quot;确定&quot;</span>,</span><br><span class="line">        cancelButtonText: <span class="string">&quot;取消&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//点击确定，执行then方法</span></span><br><span class="line">        <span class="comment">//调用删除的方法</span></span><br><span class="line">        teacher.deleteTeacherById(id).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//删除成功</span></span><br><span class="line">            <span class="comment">//提示信息</span></span><br><span class="line">            <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">                type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                message: <span class="string">&quot;删除成功!&quot;</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">//回到列表页面</span></span><br><span class="line">            <span class="built_in">this</span>.getList();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="3-添加讲师"><a href="#3-添加讲师" class="headerlink" title="3. 添加讲师"></a>3. 添加讲师</h2><h3 id="3-1-添加路由"><a href="#3-1-添加路由" class="headerlink" title="3.1 添加路由"></a>3.1 添加路由</h3><p>在src/router/index.js下添加路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: <span class="string">&#x27;save&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;添加讲师&#x27;</span>,</span><br><span class="line">    component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),</span><br><span class="line">    meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;添加讲师&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-2-创建路由对应的页面"><a href="#3-2-创建路由对应的页面" class="headerlink" title="3.2 创建路由对应的页面"></a>3.2 创建路由对应的页面</h3><p>在views/edu/teacher下创建讲师列表页面save.vue</p>
<h3 id="3-3-定义访问的接口地址"><a href="#3-3-定义访问的接口地址" class="headerlink" title="3.3 定义访问的接口地址"></a>3.3 定义访问的接口地址</h3><p>在src/api/edu/teacher.js下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加讲师</span></span><br><span class="line"><span class="function"><span class="title">addTeacher</span>(<span class="params">teacher</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/teacher/addTeacher`</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: teacher</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="3-4-调用接口得到数据"><a href="#3-4-调用接口得到数据" class="headerlink" title="3.4 调用接口得到数据"></a>3.4 调用接口得到数据</h3><p>在save.vue讲师列表页面调用定义的接口的方法，得到接口返回的数据</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> teacherApi <span class="keyword">from</span> <span class="string">&quot;@/api/edu/teacher&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ImageCropper <span class="keyword">from</span> <span class="string">&quot;@/components/ImageCropper&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> PanThumb <span class="keyword">from</span> <span class="string">&quot;@/components/PanThumb&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123; ImageCropper, PanThumb &#125;,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      teacher: &#123;</span><br><span class="line">        name: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        sort: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        level: <span class="number">1</span>,</span><br><span class="line">        career: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        intro: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        avatar: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//上传弹框组件是否显示</span></span><br><span class="line">      imagecropperShow: <span class="literal">false</span>,</span><br><span class="line">      imagecropperKey: <span class="number">0</span>, <span class="comment">//上传组件的唯一标识</span></span><br><span class="line">      BASE_API: process.env.BASE_API, <span class="comment">//获取地址</span></span><br><span class="line">      saveBtnDisabled: <span class="literal">false</span>, <span class="comment">//保存按钮是否禁用</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.init();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//监听</span></span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="comment">//路由变化的方式，当路由发生变化，方法就会执行</span></span><br><span class="line">    $route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;watch $route&quot;</span>);</span><br><span class="line">      <span class="built_in">this</span>.init();</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">//关闭上传弹窗的方法</span></span><br><span class="line">    <span class="function"><span class="title">close</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.imagecropperShow = <span class="literal">false</span>;</span><br><span class="line">      <span class="comment">//上传组件初始化</span></span><br><span class="line">      <span class="built_in">this</span>.imagecropperKey = <span class="built_in">this</span>.imagecropperKey + <span class="number">1</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//上传成功的方法</span></span><br><span class="line">    <span class="function"><span class="title">cropSuccess</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.imagecropperShow = <span class="literal">false</span>;</span><br><span class="line">      <span class="comment">//上传成功之后返回图片的地址</span></span><br><span class="line">      <span class="built_in">this</span>.teacher.avatar = data.url;</span><br><span class="line">      <span class="built_in">this</span>.imagecropperKey = <span class="built_in">this</span>.imagecropperKey + <span class="number">1</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">init</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">//判断路径有id值，做修改</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.$route.params &amp;&amp; <span class="built_in">this</span>.$route.params.id) &#123;</span><br><span class="line">        <span class="comment">//从路径获取id值</span></span><br><span class="line">        <span class="keyword">const</span> id = <span class="built_in">this</span>.$route.params.id;</span><br><span class="line">        <span class="comment">//调用根据id查询的方法</span></span><br><span class="line">        <span class="built_in">this</span>.getInfo(id);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//路径没有id值，做添加</span></span><br><span class="line">        <span class="comment">//清空表单</span></span><br><span class="line">        <span class="built_in">this</span>.teacher = &#123;&#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//数据回显</span></span><br><span class="line">    <span class="function"><span class="title">getInfo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">      teacherApi.getTeacherInfo(id).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.teacher = response.data.teacher;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">saveOrUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">//判断修改还是添加</span></span><br><span class="line">      <span class="keyword">if</span> (!<span class="built_in">this</span>.teacher.id) &#123;</span><br><span class="line">        <span class="comment">//添加</span></span><br><span class="line">        <span class="built_in">this</span>.saveTeacher();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//修改</span></span><br><span class="line">        <span class="built_in">this</span>.updateTeacher();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//添加讲师的方法</span></span><br><span class="line">    <span class="function"><span class="title">saveTeacher</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      teacherApi.addTeacher(<span class="built_in">this</span>.teacher).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//提示成功信息</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">          type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">          message: <span class="string">&quot;添加成功！&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//回到列表页面 路由跳转</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&quot;/teacher/table&quot;</span> &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//修改讲师的方法</span></span><br><span class="line">    <span class="function"><span class="title">updateTeacher</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      teacherApi.updataTeacherInfo(<span class="built_in">this</span>.teacher).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">          type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">          message: <span class="string">&quot;修改成功！&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&quot;/teacher/table&quot;</span> &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="3-5-添加成功之后跳转到讲师列表页面"><a href="#3-5-添加成功之后跳转到讲师列表页面" class="headerlink" title="3.5 添加成功之后跳转到讲师列表页面"></a>3.5 添加成功之后跳转到讲师列表页面</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//回到列表页面 路由跳转</span></span><br><span class="line"><span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&quot;/teacher/table&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="4-修改讲师"><a href="#4-修改讲师" class="headerlink" title="4. 修改讲师"></a>4. 修改讲师</h2><h3 id="4-1-每条记录后面添加修改按钮"><a href="#4-1-每条记录后面添加修改按钮" class="headerlink" title="4.1 每条记录后面添加修改按钮"></a>4.1 每条记录后面添加修改按钮</h3><h3 id="4-2-点击修改按钮，进入表单页面，进行数据回显"><a href="#4-2-点击修改按钮，进入表单页面，进行数据回显" class="headerlink" title="4.2 点击修改按钮，进入表单页面，进行数据回显"></a>4.2 点击修改按钮，进入表单页面，进行数据回显</h3><p>根据讲师id查询数据并进行数据回显</p>
<h3 id="4-3-通过路由跳转进入数据回显页面，在路由index页面添加路由"><a href="#4-3-通过路由跳转进入数据回显页面，在路由index页面添加路由" class="headerlink" title="4.3 通过路由跳转进入数据回显页面，在路由index页面添加路由"></a>4.3 通过路由跳转进入数据回显页面，在路由index页面添加路由</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    path: <span class="string">&#x27;edit/:id&#x27;</span>,</span><br><span class="line">    name: <span class="string">&#x27;EduTeacherEdit&#x27;</span>,</span><br><span class="line">    component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/teacher/save&#x27;</span>),</span><br><span class="line">    meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;编辑讲师&#x27;</span>, <span class="attr">noCache</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">    hidden: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-在表单页面中实现数据回显"><a href="#4-4-在表单页面中实现数据回显" class="headerlink" title="4.4 在表单页面中实现数据回显"></a>4.4 在表单页面中实现数据回显</h3><p>（1）在teacher.js中定义根据id查询接口</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据id查询讲师信息</span></span><br><span class="line"><span class="function"><span class="title">getTeacherInfo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/teacher/getTeacher/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>（2）在页面调用接口实现数据回显</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数据回显</span></span><br><span class="line"><span class="function"><span class="title">getInfo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    teacherApi.getTeacherInfo(id).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.teacher = response.data.teacher;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>（3）调用根据id查询讲师信息的方法</p>
<p>因为添加和修改都使用save.vue页面，所以需要区别添加和修改，只有在修改的时候才会查询数据进行回显</p>
<p>如何判断查询和修改？</p>
<p>判断路径里面是否有讲师id值，如果有id值则是修改，没有id值就是添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断路径有id值，做修改</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.$route.params &amp;&amp; <span class="built_in">this</span>.$route.params.id) &#123;</span><br><span class="line">    <span class="comment">//从路径获取id值</span></span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">this</span>.$route.params.id;</span><br><span class="line">    <span class="comment">//调用根据id查询的方法</span></span><br><span class="line">    <span class="built_in">this</span>.getInfo(id);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//路径没有id值，做添加</span></span><br><span class="line">    <span class="comment">//清空表单</span></span><br><span class="line">    <span class="built_in">this</span>.teacher = &#123;&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-5-在src-api-edu-teacher-js里面定义修改的接口"><a href="#4-5-在src-api-edu-teacher-js里面定义修改的接口" class="headerlink" title="4.5 在src/api/edu/teacher.js里面定义修改的接口"></a>4.5 在src/api/edu/teacher.js里面定义修改的接口</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改讲师</span></span><br><span class="line"><span class="function"><span class="title">updataTeacherInfo</span>(<span class="params">teacher</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">`/eduservice/teacher/updateTeacher`</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: teacher</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-6-在页面中调用接口"><a href="#4-6-在页面中调用接口" class="headerlink" title="4.6 在页面中调用接口"></a>4.6 在页面中调用接口</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改讲师的方法</span></span><br><span class="line"><span class="function"><span class="title">updateTeacher</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    teacherApi.updataTeacherInfo(<span class="built_in">this</span>.teacher).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            message: <span class="string">&quot;修改成功！&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&quot;/teacher/table&quot;</span> &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="4-7-判断是添加还是修改"><a href="#4-7-判断是添加还是修改" class="headerlink" title="4.7 判断是添加还是修改"></a>4.7 判断是添加还是修改</h3><p>在修改完成之后，由于所点击的“保存”按钮同时做了添加和修改两个功能，所以需要判断是添加还是修改</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">saveOrUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//判断修改还是添加</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.teacher.id) &#123;</span><br><span class="line">        <span class="comment">//添加</span></span><br><span class="line">        <span class="built_in">this</span>.saveTeacher();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//修改</span></span><br><span class="line">        <span class="built_in">this</span>.updateTeacher();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="5-可能会遇到的问题？"><a href="#5-可能会遇到的问题？" class="headerlink" title="5. 可能会遇到的问题？"></a>5. 可能会遇到的问题？</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193635.png"></p>
<h1 id="阿里云OSS"><a href="#阿里云OSS" class="headerlink" title="阿里云OSS"></a>阿里云OSS</h1><h2 id="1-搭建阿里云oss操作项目环境"><a href="#1-搭建阿里云oss操作项目环境" class="headerlink" title="1. 搭建阿里云oss操作项目环境"></a>1. 搭建阿里云oss操作项目环境</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193722.png"></p>
<h2 id="2-读取配置文件中的配置信息"><a href="#2-读取配置文件中的配置信息" class="headerlink" title="2. 读取配置文件中的配置信息"></a>2. 读取配置文件中的配置信息</h2><p>编写工具类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConstantPropertiesUtils</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="comment">//读取配置文件的内容</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.endpoint&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String endpoint;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keyid&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keyId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.keysecret&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String keySecret;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;aliyun.oss.file.bucketname&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bucketName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义公开静态常量</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String END_POINT;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEY_ID;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String ACCESS_KEY_SECRET;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String BUCKET_NAME;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 项目启动后，在属性交由Spring管理之后，该方法执行</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        END_POINT = endpoint;</span><br><span class="line">        ACCESS_KEY_ID = keyId;</span><br><span class="line">        ACCESS_KEY_SECRET = keySecret;</span><br><span class="line">        BUCKET_NAME = bucketName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-创建controller，创建service"><a href="#3-创建controller，创建service" class="headerlink" title="3. 创建controller，创建service"></a>3. 创建controller，创建service</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/eduoss/fileoss&quot;)</span></span><br><span class="line"><span class="meta">@CrossOrigin</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OssController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    OssService ossService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//上传头像的方法</span></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> R <span class="title">uploadOssFile</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//获取上传文件  MultipartFile</span></span><br><span class="line">        <span class="comment">//返回上传到oss的路径</span></span><br><span class="line">        String url = ossService.uploadFileAvatar(file);</span><br><span class="line">        <span class="keyword">return</span> R.ok().data(<span class="string">&quot;url&quot;</span>, url);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-在service中实现上传文件到oss的过程"><a href="#4-在service中实现上传文件到oss的过程" class="headerlink" title="4. 在service中实现上传文件到oss的过程"></a>4. 在service中实现上传文件到oss的过程</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OssService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//上传头像到OSS</span></span><br><span class="line">    <span class="function">String <span class="title">uploadFileAvatar</span><span class="params">(MultipartFile file)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OssServiceImpl</span> <span class="keyword">implements</span> <span class="title">OssService</span> </span>&#123;</span><br><span class="line">    <span class="comment">//上传头像到OSS</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">uploadFileAvatar</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//工具类获取值</span></span><br><span class="line">        <span class="comment">// yourEndpoint填写Bucket所在地域对应的Endpoint</span></span><br><span class="line">        String endpoint = ConstantPropertiesUtils.END_POINT;</span><br><span class="line">        <span class="comment">// 阿里云账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM用户进行API访问或日常运维，请登录RAM控制台创建RAM用户</span></span><br><span class="line">        String accessKeyId = ConstantPropertiesUtils.ACCESS_KEY_ID;</span><br><span class="line">        String accessKeySecret = ConstantPropertiesUtils.ACCESS_KEY_SECRET;</span><br><span class="line">        String bucketName = ConstantPropertiesUtils.BUCKET_NAME;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 创建OSSClient实例</span></span><br><span class="line">            OSS ossClient = <span class="keyword">new</span> OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取上传文件输入流</span></span><br><span class="line">            InputStream inputStream = file.getInputStream();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取文件名称</span></span><br><span class="line">            String filename = file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//在文件名称里面添加随机唯一的值</span></span><br><span class="line">            String uuid = UUID.randomUUID().toString().replaceAll(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            filename = uuid + filename;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//把文件按照日期分类</span></span><br><span class="line">            String datePath = <span class="keyword">new</span> DateTime().toString(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">            filename = datePath + <span class="string">&quot;/&quot;</span> + filename;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//调用OSS方法实现上传</span></span><br><span class="line">            <span class="comment">//第一个参数 Bucket名称</span></span><br><span class="line">            <span class="comment">//第二个参数 上传到OSS文件路径和文件名称</span></span><br><span class="line">            <span class="comment">//第三个参数 上传文件的输入流</span></span><br><span class="line">            ossClient.putObject(bucketName, filename, inputStream);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 关闭OSSClient</span></span><br><span class="line">            ossClient.shutdown();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//把上传之后的文件路径返回</span></span><br><span class="line">            String url = <span class="string">&quot;https://&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint + <span class="string">&quot;/&quot;</span> + filename;</span><br><span class="line">            <span class="keyword">return</span> url;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#可以在配置文件里面配置单个文件最大大小 spring.servlet.multipart.max-file-size=10MB</span></span><br></pre></td></tr></table></figure>

<h2 id="5-文件名称添加随机唯一值"><a href="#5-文件名称添加随机唯一值" class="headerlink" title="5. 文件名称添加随机唯一值"></a>5. 文件名称添加随机唯一值</h2><p>多次上传相同名称的文件，会造成最后一次上传的文件把之前上传的文件覆盖掉</p>
<p>解决方案？在文件名称添加随机唯一值，让每个文件名称不同</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在文件名称里面添加随机唯一的值</span></span><br><span class="line">String uuid = UUID.randomUUID().toString().replaceAll(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">filename = uuid + filename;</span><br></pre></td></tr></table></figure>

<h2 id="6-把文件进行分类管理"><a href="#6-把文件进行分类管理" class="headerlink" title="6. 把文件进行分类管理"></a>6. 把文件进行分类管理</h2><p>根据日期进行分类，实现年月日分类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把文件按照日期分类</span></span><br><span class="line">String datePath = <span class="keyword">new</span> DateTime().toString(<span class="string">&quot;yyyy/MM/dd&quot;</span>);</span><br><span class="line">filename = datePath + <span class="string">&quot;/&quot;</span> + filename;</span><br></pre></td></tr></table></figure>

<h1 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h1><h2 id="1-什么是nginx"><a href="#1-什么是nginx" class="headerlink" title="1. 什么是nginx?"></a>1. 什么是nginx?</h2><p>nginx是高性能的HTTP和反向代理的服务器，处理高并发能力是十分强大的，能经受高负载的考验，有报告表明能支持高达50,000个并发连接数。</p>
<h2 id="2-主要的功能"><a href="#2-主要的功能" class="headerlink" title="2. 主要的功能"></a>2. 主要的功能</h2><p>（1）请求转发</p>
<p>（2）负载均衡</p>
<p>（3）动静分离</p>
<h2 id="3-什么是请求转发？"><a href="#3-什么是请求转发？" class="headerlink" title="3. 什么是请求转发？"></a>3. 什么是请求转发？</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193756.png"></p>
<h2 id="4-什么是负载均衡？"><a href="#4-什么是负载均衡？" class="headerlink" title="4. 什么是负载均衡？"></a>4. 什么是负载均衡？</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193824.png"></p>
<h2 id="5-什么是动静分离？"><a href="#5-什么是动静分离？" class="headerlink" title="5. 什么是动静分离？"></a>5. 什么是动静分离？</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193922.png"></p>
<h2 id="6-nginx配置请求转发"><a href="#6-nginx配置请求转发" class="headerlink" title="6. nginx配置请求转发"></a>6. nginx配置请求转发</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524193954.png"></p>
<h1 id="上传头像前端"><a href="#上传头像前端" class="headerlink" title="上传头像前端"></a>上传头像前端</h1><h2 id="1-创建上传组件"><a href="#1-创建上传组件" class="headerlink" title="1. 创建上传组件"></a>1. 创建上传组件</h2><p>在添加讲师页面，创建上传组件，实现上传，使用element-ui组件实现</p>
<h2 id="2-在添加讲师页面使用上传组件"><a href="#2-在添加讲师页面使用上传组件" class="headerlink" title="2. 在添加讲师页面使用上传组件"></a>2. 在添加讲师页面使用上传组件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 讲师头像 --&gt;</span><br><span class="line">&lt;el-form-item label&#x3D;&quot;讲师头像&quot;&gt;</span><br><span class="line">    &lt;!-- 头衔缩略图 --&gt;</span><br><span class="line">    &lt;pan-thumb :image&#x3D;&quot;teacher.avatar&quot; &#x2F;&gt;</span><br><span class="line">    &lt;!-- 文件上传按钮 --&gt;</span><br><span class="line">    &lt;el-button</span><br><span class="line">               type&#x3D;&quot;primary&quot;</span><br><span class="line">               icon&#x3D;&quot;el-icon-upload&quot;</span><br><span class="line">               @click&#x3D;&quot;imagecropperShow &#x3D; true&quot;</span><br><span class="line">               &gt;更换头像</span><br><span class="line">    &lt;&#x2F;el-button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">		v-show：是否显示上传组件</span><br><span class="line">		:key：类似于id，如果一个页面多个图片上传控件，可以做区分</span><br><span class="line">		:url：后台上传的url地址</span><br><span class="line">		@close：关闭上传组件</span><br><span class="line">		@crop-upload-success：上传成功后的回调 </span><br><span class="line">		&lt;input type&#x3D;&quot;file&quot; name&#x3D;&quot;file&quot;&#x2F;&gt;</span><br><span class="line">	--&gt;</span><br><span class="line">    &lt;image-cropper</span><br><span class="line">                   v-show&#x3D;&quot;imagecropperShow&quot;</span><br><span class="line">                   :width&#x3D;&quot;300&quot;</span><br><span class="line">                   :height&#x3D;&quot;300&quot;</span><br><span class="line">                   :key&#x3D;&quot;imagecropperKey&quot;</span><br><span class="line">                   :url&#x3D;&quot;BASE_API + &#39;&#x2F;eduoss&#x2F;fileoss&#39;&quot;</span><br><span class="line">                   field&#x3D;&quot;file&quot;</span><br><span class="line">                   @close&#x3D;&quot;close&quot;</span><br><span class="line">                   @crop-upload-success&#x3D;&quot;cropSuccess&quot;</span><br><span class="line">                   &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">&lt;el-form-item&gt;</span><br><span class="line">    &lt;el-button</span><br><span class="line">               :disabled&#x3D;&quot;saveBtnDisabled&quot;</span><br><span class="line">               type&#x3D;&quot;primary&quot;</span><br><span class="line">               @click&#x3D;&quot;saveOrUpdate&quot;</span><br><span class="line">               &gt;保存&lt;&#x2F;el-button</span><br><span class="line">        &gt;</span><br><span class="line">&lt;&#x2F;el-form-item&gt;</span><br></pre></td></tr></table></figure>

<p>JavaScript方法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//关闭上传弹窗的方法</span></span><br><span class="line"><span class="function"><span class="title">close</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.imagecropperShow = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//上传组件初始化，防止下次打开上传文件弹窗还是上一次的状态</span></span><br><span class="line">    <span class="built_in">this</span>.imagecropperKey = <span class="built_in">this</span>.imagecropperKey + <span class="number">1</span>;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//上传成功的方法</span></span><br><span class="line"><span class="function"><span class="title">cropSuccess</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.imagecropperShow = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//上传成功之后返回图片的地址</span></span><br><span class="line">    <span class="built_in">this</span>.teacher.avatar = data.url;</span><br><span class="line">    <span class="built_in">this</span>.imagecropperKey = <span class="built_in">this</span>.imagecropperKey + <span class="number">1</span>;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="课程分类"><a href="#课程分类" class="headerlink" title="课程分类"></a>课程分类</h1><h2 id="1-课程分类存储结构"><a href="#1-课程分类存储结构" class="headerlink" title="1. 课程分类存储结构"></a>1. 课程分类存储结构</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524194027.png"></p>
<h2 id="2-什么是EasyExcel？"><a href="#2-什么是EasyExcel？" class="headerlink" title="2. 什么是EasyExcel？"></a>2. 什么是EasyExcel？</h2><p>EasyExcel是一个基于Java的简单、省内存的读写Excel的开源项目。在尽可能节约内存的情况下支持读写百M的Excel。</p>
<h2 id="3-创建实体类和excel对应关系"><a href="#3-创建实体类和excel对应关系" class="headerlink" title="3. 创建实体类和excel对应关系"></a>3. 创建实体类和excel对应关系</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectData</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ExcelProperty(index = 0)</span></span><br><span class="line">    <span class="keyword">private</span> String oneSubjectName;</span><br><span class="line">    <span class="meta">@ExcelProperty(index = 1)</span></span><br><span class="line">    <span class="keyword">private</span> String twoSubjectName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-添加课程分类"><a href="#4-添加课程分类" class="headerlink" title="4. 添加课程分类"></a>4. 添加课程分类</h2><p>通过EasyExcel，获取上传过来的文件，把文件内容读取出来</p>
<p>（1）EduSubjectController：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加课程分类</span></span><br><span class="line"><span class="comment">//获取上传过来的文件，把文件内容读取出来</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;addSubject&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">addSubject</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">    subjectService.saveSubject(file, subjectService);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）EduSubjectService：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加课程分类</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">saveSubject</span><span class="params">(MultipartFile file,EduSubjectService subjectService)</span></span>;</span><br></pre></td></tr></table></figure>

<p>（3）EduSubjectServiceImpl：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加课程分类</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">saveSubject</span><span class="params">(MultipartFile file, EduSubjectService subjectService)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//文件输入流</span></span><br><span class="line">        InputStream in = file.getInputStream();</span><br><span class="line">        <span class="comment">//调用方法进行读取</span></span><br><span class="line">        EasyExcel.read(in, SubjectData.class, <span class="keyword">new</span> SubjectExcelListener(subjectService)).sheet().doRead();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（4）监听器实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubjectExcelListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">SubjectData</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">//因为SubjectExcelListener不能交给Spring管理，需要自己new，不能注入其他对象</span></span><br><span class="line">    <span class="comment">//不能实现数据库操作</span></span><br><span class="line">    <span class="keyword">public</span> EduSubjectService subjectService;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubjectExcelListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SubjectExcelListener</span><span class="params">(EduSubjectService subjectService)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subjectService = subjectService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(SubjectData subjectData, AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (subjectData == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;文件数据为空&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//一行一行读取，每次读取有两个值，第一个值是一级分类，第二个值是二级分类</span></span><br><span class="line">        <span class="comment">//判断一级分类是否重复</span></span><br><span class="line">        EduSubject existOneSubject = <span class="keyword">this</span>.existOneSubject(subjectService, subjectData.getOneSubjectName());</span><br><span class="line">        <span class="keyword">if</span> (existOneSubject == <span class="keyword">null</span>) &#123;</span><br><span class="line">            existOneSubject = <span class="keyword">new</span> EduSubject();</span><br><span class="line">            existOneSubject.setParentId(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">            existOneSubject.setTitle(subjectData.getOneSubjectName());</span><br><span class="line">            subjectService.save(existOneSubject);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//添加二级分类</span></span><br><span class="line">        <span class="comment">//判断二级分类是否重复</span></span><br><span class="line">        <span class="comment">//获取一级分类id值</span></span><br><span class="line">        String pid = existOneSubject.getId();</span><br><span class="line">        EduSubject existTwoSubject = <span class="keyword">this</span>.existTwoSubject(subjectService, subjectData.getOneSubjectName(), pid);</span><br><span class="line">        <span class="keyword">if</span> (existTwoSubject == <span class="keyword">null</span>) &#123;</span><br><span class="line">            existTwoSubject = <span class="keyword">new</span> EduSubject();</span><br><span class="line">            existTwoSubject.setParentId(pid);</span><br><span class="line">            existTwoSubject.setTitle(subjectData.getTwoSubjectName());</span><br><span class="line">            subjectService.save(existTwoSubject);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断一级分类不能重复添加</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> EduSubject <span class="title">existOneSubject</span><span class="params">(EduSubjectService subjectService, String name)</span> </span>&#123;</span><br><span class="line">        QueryWrapper&lt;EduSubject&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;title&quot;</span>, name);</span><br><span class="line">        wrapper.eq(<span class="string">&quot;parent_id&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">        EduSubject oneSubject = subjectService.getOne(wrapper);</span><br><span class="line">        <span class="keyword">return</span> oneSubject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断二级分类不能重复添加</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> EduSubject <span class="title">existTwoSubject</span><span class="params">(EduSubjectService subjectService, String name, String pid)</span> </span>&#123;</span><br><span class="line">        QueryWrapper&lt;EduSubject&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">        wrapper.eq(<span class="string">&quot;title&quot;</span>, name);</span><br><span class="line">        wrapper.eq(<span class="string">&quot;parent_id&quot;</span>, pid);</span><br><span class="line">        EduSubject twoSubject = subjectService.getOne(wrapper);</span><br><span class="line">        <span class="keyword">return</span> twoSubject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext analysisContext)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="课程分类前端"><a href="#课程分类前端" class="headerlink" title="课程分类前端"></a>课程分类前端</h1><h2 id="1-添加课程分类路由"><a href="#1-添加课程分类路由" class="headerlink" title="1. 添加课程分类路由"></a>1. 添加课程分类路由</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//课程分类管理</span></span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/subject&#x27;</span>,</span><br><span class="line">  component: Layout,</span><br><span class="line">  redirect: <span class="string">&#x27;/subject/list&#x27;</span>,</span><br><span class="line">  name: <span class="string">&#x27;课程分类管理&#x27;</span>,</span><br><span class="line">  meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;课程分类管理&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;example&#x27;</span> &#125;,</span><br><span class="line">  children: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;课程分类列表&#x27;</span>,</span><br><span class="line">      component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/subject/list&#x27;</span>),</span><br><span class="line">      meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;课程分类列表&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;table&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;save&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;添加课程分类&#x27;</span>,</span><br><span class="line">      component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;@/views/edu/subject/save&#x27;</span>),</span><br><span class="line">      meta: &#123; <span class="attr">title</span>: <span class="string">&#x27;添加课程分类&#x27;</span>, <span class="attr">icon</span>: <span class="string">&#x27;tree&#x27;</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="2-上传课程分类文件"><a href="#2-上传课程分类文件" class="headerlink" title="2. 上传课程分类文件"></a>2. 上传课程分类文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;el-form label-width&#x3D;&quot;120px&quot;&gt;</span><br><span class="line">      &lt;el-form-item label&#x3D;&quot;信息描述&quot;&gt;</span><br><span class="line">        &lt;el-tag type&#x3D;&quot;info&quot;&gt;excel模版说明&lt;&#x2F;el-tag&gt;</span><br><span class="line">        &lt;el-tag&gt;</span><br><span class="line">          &lt;i class&#x3D;&quot;el-icon-download&quot; &#x2F;&gt;</span><br><span class="line">          &lt;a :href&#x3D;&quot;&#39;&#x2F;static&#x2F;01.xlsx&#39;&quot;&gt;点击下载模版&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;el-tag&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!--accept&#x3D;&quot;application&#x2F;vnd.ms-excel&quot;--&gt;</span><br><span class="line">      &lt;el-form-item label&#x3D;&quot;选择Excel&quot;&gt;</span><br><span class="line">        &lt;el-upload ref&#x3D;&quot;upload&quot; :auto-upload&#x3D;&quot;false&quot; :on-success&#x3D;&quot;fileUploadSuccess&quot; :on-error&#x3D;&quot;fileUploadError&quot;</span><br><span class="line">          :disabled&#x3D;&quot;importBtnDisabled&quot; :limit&#x3D;&quot;1&quot; :action&#x3D;&quot;BASE_API + &#39;&#x2F;eduservice&#x2F;subject&#x2F;addSubject&#39;&quot; name&#x3D;&quot;file&quot;</span><br><span class="line">          accept&#x3D;&quot;.xlsx&quot;&gt;</span><br><span class="line">          &lt;el-button slot&#x3D;&quot;trigger&quot; size&#x3D;&quot;small&quot; type&#x3D;&quot;primary&quot;&gt;选取文件&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;el-button :loading&#x3D;&quot;loading&quot; style&#x3D;&quot;margin-left: 10px&quot; size&#x3D;&quot;small&quot; type&#x3D;&quot;success&quot; @click&#x3D;&quot;submitUpload&quot;&gt;</span><br><span class="line">            上传到服务器&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;el-upload&gt;</span><br><span class="line">      &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;&#x2F;el-form&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      BASE_API: process.env.BASE_API, &#x2F;&#x2F; 接口API地址</span><br><span class="line">      OSS_PATH: process.env.OSS_PATH, &#x2F;&#x2F; 阿里云OSS地址</span><br><span class="line">      fileUploadBtnText: &quot;上传到服务器&quot;, &#x2F;&#x2F; 按钮文字</span><br><span class="line">      importBtnDisabled: false, &#x2F;&#x2F; 按钮是否禁用,</span><br><span class="line">      loading: false,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123; &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F;点击按钮上传文件到接口里面</span><br><span class="line">    submitUpload() &#123;</span><br><span class="line">      this.importBtnDisabled &#x3D; true;</span><br><span class="line">      this.loading &#x3D; true;</span><br><span class="line">      this.$refs.upload.submit();</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F;上传成功</span><br><span class="line">    fileUploadSuccess() &#123;</span><br><span class="line">      &#x2F;&#x2F;提示信息</span><br><span class="line">      this.loading &#x3D; false;</span><br><span class="line">      this.$message(&#123;</span><br><span class="line">        type: &quot;success&quot;,</span><br><span class="line">        message: &quot;添加课程分类成功&quot;,</span><br><span class="line">      &#125;);</span><br><span class="line">      &#x2F;&#x2F;跳转到课程分类列表</span><br><span class="line">      &#x2F;&#x2F;路由跳转</span><br><span class="line">      this.router.push(&#123; path: &#39;&#x2F;subject&#x2F;list&#39; &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F;上传失败</span><br><span class="line">    fileUploadError() &#123;</span><br><span class="line">      this.loading &#x3D; false;</span><br><span class="line">      this.$message(&#123;</span><br><span class="line">        type: &quot;error&quot;,</span><br><span class="line">        message: &quot;添加课程分类失败&quot;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-课程分类树形结构显示"><a href="#3-课程分类树形结构显示" class="headerlink" title="3. 课程分类树形结构显示"></a>3. 课程分类树形结构显示</h2><p>（1）在属性结构显示分类中，我们需要从接口中得到类似如下格式的数据：</p>
<p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524194154.png"></p>
<h3 id="3-1-如何得到这样格式的数据？"><a href="#3-1-如何得到这样格式的数据？" class="headerlink" title="3.1 如何得到这样格式的数据？"></a>3.1 如何得到这样格式的数据？</h3><p>（1）针对返回数据创建对应的实体类，我们可以将id和label当作一个实体类中的两个属性，那么在此我们就需要创建两个实体类，一级分类和二级分类，并且一个一级分类中可以有多个二级分类</p>
<p>一级分类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//一级分类</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OneSubject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//一个一级分类中有多个二级分类</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;TwoSubject&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>二级分类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//二级分类</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TwoSubject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>封装数据格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//课程分类列表（树形结构）</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;OneSubject&gt; <span class="title">getAllOneTwoSubject</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1、查询所有一级分类 parent_id = 0</span></span><br><span class="line">    QueryWrapper&lt;EduSubject&gt; wrapperOne = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapperOne.eq(<span class="string">&quot;parent_id&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    List&lt;EduSubject&gt; oneSubjectList = baseMapper.selectList(wrapperOne);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、查询所有二级分类 parent_id != 0</span></span><br><span class="line">    QueryWrapper&lt;EduSubject&gt; wrapperTwo = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapperOne.ne(<span class="string">&quot;parent_id&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    List&lt;EduSubject&gt; twoSubjectList = baseMapper.selectList(wrapperTwo);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建list集合，用于存储最终封装的数据</span></span><br><span class="line">    ArrayList&lt;OneSubject&gt; finalSubjectList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、封装一级分类</span></span><br><span class="line">    <span class="comment">//查询出来所有的一级分类list集合遍历，得到每个一级分类对象，获取每一个一级分类对象地值，封装到所要求的list集合里面</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; oneSubjectList.size(); i++) &#123;</span><br><span class="line">        <span class="comment">//得到oneSubjectList每个值，存放到eduSubject中去</span></span><br><span class="line">        EduSubject eduSubject = oneSubjectList.get(i);</span><br><span class="line">        <span class="comment">//从eduSubject里面获取出来的值，存放到oneSubject对象里面</span></span><br><span class="line">        OneSubject oneSubject = <span class="keyword">new</span> OneSubject();</span><br><span class="line">        <span class="comment">//get eduSubject里面的值，set 到oneSubject中去</span></span><br><span class="line">        BeanUtils.copyProperties(eduSubject, oneSubject);</span><br><span class="line">        <span class="comment">//将oneSubject放到finalSubjectList中去</span></span><br><span class="line">        finalSubjectList.add(oneSubject);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、封装二级分类</span></span><br><span class="line">        <span class="comment">//在一级分类中循环遍历查询所有的二级分类</span></span><br><span class="line">        <span class="comment">//创建list集合封装每一个一级分类的二级分类</span></span><br><span class="line">        ArrayList&lt;TwoSubject&gt; twoFinalSubjectList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="comment">//遍历二级分类list集合</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; twoSubjectList.size(); j++) &#123;</span><br><span class="line">            <span class="comment">//获取每个二级分类 tSubject：每个二级分类</span></span><br><span class="line">            EduSubject tSubject = twoSubjectList.get(j);</span><br><span class="line">            <span class="comment">//判断二级分类的parent_id是否和一级分类的id相同</span></span><br><span class="line">            <span class="keyword">if</span> (tSubject.getParentId().equals(eduSubject.getId())) &#123;</span><br><span class="line">                <span class="comment">//把tSubject值复制到twoSubject里面，再放到twoFinalSubjectList里面</span></span><br><span class="line">                TwoSubject twoSubject = <span class="keyword">new</span> TwoSubject();</span><br><span class="line">                BeanUtils.copyProperties(tSubject, twoSubject);</span><br><span class="line">                twoFinalSubjectList.add(twoSubject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//把一级下面所有二级分类放到一级分类里面</span></span><br><span class="line">        oneSubject.setChildren(twoFinalSubjectList);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> finalSubjectList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-前端接口调用"><a href="#4-前端接口调用" class="headerlink" title="4. 前端接口调用"></a>4. 前端接口调用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">//课程分类列表</span></span><br><span class="line">    <span class="function"><span class="title">getSubjectList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> request(&#123;</span><br><span class="line">            url: <span class="string">`/eduservice/subject/getAllSubject`</span>,</span><br><span class="line">            method: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-前端页面显示"><a href="#5-前端页面显示" class="headerlink" title="5. 前端页面显示"></a>5. 前端页面显示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;el-input v-model&#x3D;&quot;filterText&quot; placeholder&#x3D;&quot;Filter keyword&quot; style&#x3D;&quot;margin-bottom: 30px&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-tree ref&#x3D;&quot;tree2&quot; :data&#x3D;&quot;data2&quot; :props&#x3D;&quot;defaultProps&quot; :filter-node-method&#x3D;&quot;filterNode&quot; class&#x3D;&quot;filter-tree&quot;</span><br><span class="line">      default-expand-all &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import subject from &quot;@&#x2F;api&#x2F;edu&#x2F;subject&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      filterText: &quot;&quot;,</span><br><span class="line">      data2: [], &#x2F;&#x2F;返回的所有类型的数据</span><br><span class="line">      defaultProps: &#123;</span><br><span class="line">        children: &quot;children&quot;,</span><br><span class="line">        label: &quot;title&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    this.getAllSubjectList();</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    filterText(val) &#123;</span><br><span class="line">      this.$refs.tree2.filter(val);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    getAllSubjectList() &#123;</span><br><span class="line">      subject.getSubjectList().then((response) &#x3D;&gt; &#123;</span><br><span class="line">        this.data2 &#x3D; response.data.list;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    filterNode(value, data) &#123;</span><br><span class="line">      if (!value) return true;</span><br><span class="line">      return data.title.toLowerCase().indexOf(value.toLowerCase()) !&#x3D;&#x3D; -1;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<h1 id="课程发布"><a href="#课程发布" class="headerlink" title="课程发布"></a>课程发布</h1><h2 id="1-课程发布流程"><a href="#1-课程发布流程" class="headerlink" title="1. 课程发布流程"></a>1. 课程发布流程</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220523223028.png"></p>
<h2 id="2-课程相关表关系"><a href="#2-课程相关表关系" class="headerlink" title="2. 课程相关表关系"></a>2. 课程相关表关系</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220523223144.png"></p>
<h2 id="3-课程发布的实现"><a href="#3-课程发布的实现" class="headerlink" title="3. 课程发布的实现"></a>3. 课程发布的实现</h2><h3 id="3-1-使用代码生成器生成课程相关的代码"><a href="#3-1-使用代码生成器生成课程相关的代码" class="headerlink" title="3.1 使用代码生成器生成课程相关的代码"></a>3.1 使用代码生成器生成课程相关的代码</h3><h3 id="3-2-创建实体类用于表单数据封装"><a href="#3-2-创建实体类用于表单数据封装" class="headerlink" title="3.2 创建实体类用于表单数据封装"></a>3.2 创建实体类用于表单数据封装</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CourseInfoVo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程讲师ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String teacherId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程专业ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;一级分类ID&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String subjectParentId;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程标题&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程销售价格，设置为0则可免费观看&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal price;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;总课时&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程封面图片路径&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;课程简介&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-3-编写controller和service部分"><a href="#3-3-编写controller和service部分" class="headerlink" title="3.3 编写controller和service部分"></a>3.3 编写controller和service部分</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EduCourseService courseService;</span><br><span class="line"></span><br><span class="line"><span class="comment">//添加课程基本信息的方法</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/addCourseInfo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">addCourseInfo</span><span class="params">(<span class="meta">@RequestBody</span> CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">    String id = courseService.saveCourseInfo(courseInfoVo);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseId&quot;</span>, id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加课程基本信息的方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">saveCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1、向课程表添加课程基本信息 edu_course</span></span><br><span class="line">    <span class="comment">//把courseInfoVo转换成eduCourse</span></span><br><span class="line">    EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">    BeanUtils.copyProperties(courseInfoVo, eduCourse);</span><br><span class="line">    <span class="keyword">int</span> insert = baseMapper.insert(eduCourse);</span><br><span class="line">    <span class="keyword">if</span> (insert &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;添加课程信息失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取添加成功后的课程id</span></span><br><span class="line">    String cid = eduCourse.getId();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、向课程简介表添加课程简介</span></span><br><span class="line">    EduCourseDescription eduCourseDescription = <span class="keyword">new</span> EduCourseDescription();</span><br><span class="line">    eduCourseDescription.setDescription(courseInfoVo.getDescription());</span><br><span class="line"></span><br><span class="line">    eduCourseDescription.setId(cid);<span class="comment">//设置课程描述id就是课程id</span></span><br><span class="line">    eduCourseDescriptionService.save(eduCourseDescription);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> cid;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-下拉列表显示所有讲师"><a href="#4-下拉列表显示所有讲师" class="headerlink" title="4. 下拉列表显示所有讲师"></a>4. 下拉列表显示所有讲师</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 课程讲师 --&gt;</span><br><span class="line">&lt;el-form-item label&#x3D;&quot;课程讲师&quot;&gt;</span><br><span class="line">    &lt;el-select v-model&#x3D;&quot;courseInfo.teacherId&quot; placeholder&#x3D;&quot;请选择&quot;&gt;</span><br><span class="line">        &lt;el-option v-for&#x3D;&quot;teacher in teacherList&quot; :key&#x3D;&quot;teacher.id&quot; 														:label&#x3D;&quot;teacher.name&quot; :value&#x3D;&quot;teacher.id&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-select&gt;</span><br><span class="line">&lt;&#x2F;el-form-item&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//初始化所有讲师</span></span><br><span class="line">    <span class="built_in">this</span>.getTeacherList();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询所有的讲师</span></span><br><span class="line"><span class="function"><span class="title">getTeacherList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    course.getTeacherList().then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.teacherList = response.data.items;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="5-课程分类二级联动显示"><a href="#5-课程分类二级联动显示" class="headerlink" title="5. 课程分类二级联动显示"></a>5. 课程分类二级联动显示</h2><h3 id="5-1-第一次进入页面，显示所有一级分类"><a href="#5-1-第一次进入页面，显示所有一级分类" class="headerlink" title="5.1 第一次进入页面，显示所有一级分类"></a>5.1 第一次进入页面，显示所有一级分类</h3><p>此时不查询二级分类，二级分类为空</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                .</span></span><br><span class="line"><span class="comment">                .</span></span><br><span class="line"><span class="comment">                .</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">    <span class="comment">//初始化一级分类</span></span><br><span class="line">    <span class="built_in">this</span>.getOneSubject();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">                .</span></span><br><span class="line"><span class="comment">                .</span></span><br><span class="line"><span class="comment">                .</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="5-2-当选择一级分类时，显示一级分类里面对应的二级分类"><a href="#5-2-当选择一级分类时，显示一级分类里面对应的二级分类" class="headerlink" title="5.2 当选择一级分类时，显示一级分类里面对应的二级分类"></a>5.2 当选择一级分类时，显示一级分类里面对应的二级分类</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查询所有的一级分类</span></span><br><span class="line"><span class="function"><span class="title">getOneSubject</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    subject.getSubjectList().then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.subjectOneList = response.data.list;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-select v-model&#x3D;&quot;courseInfo.subjectParentId&quot; placeholder&#x3D;&quot;一级分类&quot; @change&#x3D;&quot;subjectLevelOneChanged&quot;&gt;</span><br><span class="line">    &lt;el-option v-for&#x3D;&quot;subject in subjectOneList&quot; </span><br><span class="line">               :key&#x3D;&quot;subject.id&quot; 																   :label&#x3D;&quot;subject.title&quot; :value&#x3D;&quot;subject.id&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;el-select&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//点击某一个分类，触发change，显示对应的二级分类</span></span><br><span class="line"><span class="function"><span class="title">subjectLevelOneChanged</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//value就是一级分类的id值</span></span><br><span class="line">    <span class="comment">//遍历所有的分类，包含一级和二级</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.subjectOneList.length; i++) &#123;</span><br><span class="line">        <span class="comment">//每个一级分类</span></span><br><span class="line">        <span class="keyword">var</span> oneSubject = <span class="built_in">this</span>.subjectOneList[i];</span><br><span class="line">        <span class="comment">//判断：所有一级分类的id和所选择的一级分类的id是否一样</span></span><br><span class="line">        <span class="keyword">if</span> (value === oneSubject.id) &#123;</span><br><span class="line">            <span class="comment">//从一级分类中获取所有的二级分类</span></span><br><span class="line">            <span class="built_in">this</span>.subjectTwoList = oneSubject.children;</span><br><span class="line">            <span class="comment">//把二级分类的id值清空</span></span><br><span class="line">            <span class="built_in">this</span>.courseInfo.subjectId = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 二级分类 --&gt;</span><br><span class="line">&lt;el-select v-model&#x3D;&quot;courseInfo.subjectId&quot; placeholder&#x3D;&quot;二级分类&quot;&gt;</span><br><span class="line">    &lt;el-option v-for&#x3D;&quot;subject in subjectTwoList&quot; </span><br><span class="line">               :key&#x3D;&quot;subject.id&quot; 																   :label&#x3D;&quot;subject.title&quot; :value&#x3D;&quot;subject.id&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;el-select&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-上传课程封面"><a href="#6-上传课程封面" class="headerlink" title="6. 上传课程封面"></a>6. 上传课程封面</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 课程封面--&gt;</span><br><span class="line">&lt;el-form-item label&#x3D;&quot;课程封面&quot;&gt;</span><br><span class="line">    &lt;el-upload :show-file-list&#x3D;&quot;false&quot; :on-success&#x3D;&quot;handleAvatarSuccess&quot; </span><br><span class="line">               :before-upload&#x3D;&quot;beforeAvatarUpload&quot;</span><br><span class="line">               :action&#x3D;&quot;BASE_API + &#39;&#x2F;eduoss&#x2F;fileoss&#39;&quot; class&#x3D;&quot;avatar-uploader&quot;&gt;</span><br><span class="line">        &lt;img :src&#x3D;&quot;courseInfo.cover&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;el-upload&gt;</span><br><span class="line">&lt;&#x2F;el-form-item&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上传之前调用的方法</span></span><br><span class="line"><span class="function"><span class="title">beforeAvatarUpload</span>(<span class="params">file</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isJPG = file.type === <span class="string">&quot;image/jpeg&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> isLt2M = file.size / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!isJPG) &#123;</span><br><span class="line">        <span class="built_in">this</span>.$message.error(<span class="string">&quot;上传头像图片只能是 JPG 格式!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!isLt2M) &#123;</span><br><span class="line">        <span class="built_in">this</span>.$message.error(<span class="string">&quot;上传头像图片大小不能超过 2MB!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> isJPG &amp;&amp; isLt2M;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上传封面成功调用的方法</span></span><br><span class="line"><span class="function"><span class="title">handleAvatarSuccess</span>(<span class="params">res, file</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.courseInfo.cover = res.data.url;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="7-整合富文本编辑器"><a href="#7-整合富文本编辑器" class="headerlink" title="7. 整合富文本编辑器"></a>7. 整合富文本编辑器</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524195509.png"></p>
<h1 id="课程大纲"><a href="#课程大纲" class="headerlink" title="课程大纲"></a>课程大纲</h1><h2 id="1-课程章节小节数据封装"><a href="#1-课程章节小节数据封装" class="headerlink" title="1. 课程章节小节数据封装"></a>1. 课程章节小节数据封装</h2><p>思路类似于课程分类时的数据封装，先创建两个实体类（章节和小节），在章节实体类中使用list封装小节</p>
<p>课程小节：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VideoVo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String videoSourceId;<span class="comment">//视频id</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>课程章节：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChapterVo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//章节里的小节</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;VideoVo&gt; children = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>封装数据：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EduVideoService eduVideoService;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据课程id查询课程章节信息</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;ChapterVo&gt; <span class="title">getChapterVideoByCourseId</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1、根据课程id查询课程章节信息</span></span><br><span class="line">    QueryWrapper&lt;EduChapter&gt; wrapperChapter = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapperChapter.eq(<span class="string">&quot;course_id&quot;</span>, courseId);</span><br><span class="line">    List&lt;EduChapter&gt; eduChapterList = baseMapper.selectList(wrapperChapter);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2、根据课程id查询课程里面的所有小节</span></span><br><span class="line">    QueryWrapper&lt;EduVideo&gt; wrapperVideo = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapperVideo.eq(<span class="string">&quot;course_id&quot;</span>, courseId);</span><br><span class="line">    List&lt;EduVideo&gt; eduVideoList = eduVideoService.list(wrapperVideo);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3、循环遍历eduChapterList，将其中的值封装到ChapterVo中</span></span><br><span class="line">    List&lt;ChapterVo&gt; finalList = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">//用于封装eduChapter</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; eduChapterList.size(); i++) &#123;</span><br><span class="line">        EduChapter eduChapter = eduChapterList.get(i);</span><br><span class="line">        <span class="comment">//将eduChapter中的值取出来放到chapterVo中</span></span><br><span class="line">        ChapterVo chapterVo = <span class="keyword">new</span> ChapterVo();</span><br><span class="line">        BeanUtils.copyProperties(eduChapter, chapterVo);</span><br><span class="line">        <span class="comment">//把chapterVo放到finalList中</span></span><br><span class="line">        finalList.add(chapterVo);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4、循环遍历eduVideoList，将其中的值封装到VideoVo</span></span><br><span class="line">        List&lt;VideoVo&gt; videoList = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">//用于封装eduVideo</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; eduVideoList.size(); j++) &#123;</span><br><span class="line">            EduVideo eduVideo = eduVideoList.get(j);</span><br><span class="line">            <span class="comment">//判断小节里面的chapterId和章节里面的id是否一样，相等再进行封装</span></span><br><span class="line">            <span class="keyword">if</span> (eduVideo.getChapterId().equals(eduChapter.getId())) &#123;</span><br><span class="line">                VideoVo videoVo = <span class="keyword">new</span> VideoVo();</span><br><span class="line">                <span class="comment">//将eduVideo中的值取出来放到videoVo中</span></span><br><span class="line">                BeanUtils.copyProperties(eduVideo, videoVo);</span><br><span class="line">                <span class="comment">//把videoVo放到videoList中</span></span><br><span class="line">                videoList.add(videoVo);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//设置章节里的小节</span></span><br><span class="line">        chapterVo.setChildren(videoList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> finalList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-前端实现"><a href="#2-前端实现" class="headerlink" title="2. 前端实现"></a>2. 前端实现</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1、根据课程id获取章节和小节数据列表</span></span><br><span class="line"><span class="function"><span class="title">getAllChapterVideo</span>(<span class="params">courseId</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/chapter/getChapterVideo/&#x27;</span> + courseId,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取路由的id值</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">this</span>.$route.params &amp;&amp; <span class="built_in">this</span>.$route.params.id) &#123;</span><br><span class="line">    <span class="built_in">this</span>.courseId = <span class="built_in">this</span>.$route.params.id;</span><br><span class="line">    <span class="comment">//根据课程id查询章节和小节</span></span><br><span class="line">    <span class="built_in">this</span>.getChapterVideo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询章节和小节</span></span><br><span class="line"><span class="function"><span class="title">getChapterVideo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    chapter.getAllChapterVideo(<span class="built_in">this</span>.courseId).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chapterVideoList = response.data.allChapterVideo;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 章节 --&gt;</span><br><span class="line">&lt;ul class&#x3D;&quot;chapterList&quot;&gt;</span><br><span class="line">    &lt;li v-for&#x3D;&quot;chapter in chapterVideoList&quot; :key&#x3D;&quot;chapter.id&quot;&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">            &#123;&#123; chapter.title &#125;&#125;</span><br><span class="line">            &lt;span class&#x3D;&quot;acts&quot;&gt;</span><br><span class="line">                &lt;el-button style&#x3D;&quot;&quot; </span><br><span class="line">                           type&#x3D;&quot;text&quot; </span><br><span class="line">                           @click&#x3D;&quot;openVideo(chapter.id)&quot;&gt;添加小节&lt;&#x2F;el-button&gt;</span><br><span class="line">                &lt;el-button style&#x3D;&quot;&quot; </span><br><span class="line">                           type&#x3D;&quot;text&quot; </span><br><span class="line">                           @click&#x3D;&quot;openEditChatper(chapter.id)&quot;&gt;编辑&lt;&#x2F;el-button&gt;</span><br><span class="line">                &lt;el-button type&#x3D;&quot;text&quot; </span><br><span class="line">                           @click&#x3D;&quot;removeChapter(chapter.id)&quot;&gt;删除&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;p&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- 视频 --&gt;</span><br><span class="line">        &lt;ul class&#x3D;&quot;chanpterList videoList&quot;&gt;</span><br><span class="line">            &lt;li v-for&#x3D;&quot;video in chapter.children&quot; :key&#x3D;&quot;video.id&quot;&gt;</span><br><span class="line">                &lt;p&gt;</span><br><span class="line">                    &#123;&#123; video.title &#125;&#125;</span><br><span class="line">                    &lt;span class&#x3D;&quot;acts&quot;&gt;</span><br><span class="line">                        &lt;el-button type&#x3D;&quot;text&quot; </span><br><span class="line">                                   @click&#x3D;&quot;getVideoInfo(video.id)&quot;&gt;编辑&lt;&#x2F;el-button&gt;</span><br><span class="line">                        &lt;el-button type&#x3D;&quot;text&quot; </span><br><span class="line">                                   @click&#x3D;&quot;removeVideo(video.id)&quot;&gt;删除&lt;&#x2F;el-button&gt;</span><br><span class="line">                    &lt;&#x2F;span&gt;</span><br><span class="line">                &lt;&#x2F;p&gt;</span><br><span class="line">            &lt;&#x2F;li&gt;</span><br><span class="line">        &lt;&#x2F;ul&gt;</span><br><span class="line">    &lt;&#x2F;li&gt;</span><br><span class="line">&lt;&#x2F;ul&gt;</span><br></pre></td></tr></table></figure>

<h1 id="修改课程信息"><a href="#修改课程信息" class="headerlink" title="修改课程信息"></a>修改课程信息</h1><h2 id="1-数据回显"><a href="#1-数据回显" class="headerlink" title="1. 数据回显"></a>1. 数据回显</h2><p>点击上一步的时候，回到第一步，把课程的基本信息进行数据回显</p>
<p>EduCourseController：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询课程信息</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getCourseInfo/&#123;courseId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getCourseInfo</span><span class="params">(<span class="meta">@PathVariable</span> String courseId)</span> </span>&#123;</span><br><span class="line">    CourseInfoVo courseInfoVo = courseService.getCourseInfo(courseId);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;courseInfoVo&quot;</span>, courseInfoVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduCourseServiceImpl：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询课程信息</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CourseInfoVo <span class="title">getCourseInfo</span><span class="params">(String courseId)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1、查询课程表</span></span><br><span class="line">    EduCourse eduCourse = baseMapper.selectById(courseId);</span><br><span class="line">    CourseInfoVo courseInfoVo = <span class="keyword">new</span> CourseInfoVo();<span class="comment">//用于封装课程信息和课程描述</span></span><br><span class="line">    BeanUtils.copyProperties(eduCourse, courseInfoVo);</span><br><span class="line">    <span class="comment">//2、查询课程描述表</span></span><br><span class="line">    EduCourseDescription eduCourseDescription = 																		eduCourseDescriptionService.getById(courseId);</span><br><span class="line">    courseInfoVo.setDescription(eduCourseDescription.getDescription());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> courseInfoVo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-修改内容"><a href="#2-修改内容" class="headerlink" title="2. 修改内容"></a>2. 修改内容</h2><p>在数据回显页面，修改内容，保存，修改数据库中的内容</p>
<p>EduCourseController：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改课程信息</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;updateCourseInfo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateCourseInfo</span><span class="params">(<span class="meta">@RequestBody</span> CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">    courseService.updateCourseInfo(courseInfoVo);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduCourseServiceImpl：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改课程信息</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateCourseInfo</span><span class="params">(CourseInfoVo courseInfoVo)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//修改课程表</span></span><br><span class="line">    EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">    BeanUtils.copyProperties(courseInfoVo, eduCourse);</span><br><span class="line">    <span class="keyword">int</span> update = baseMapper.updateById(eduCourse);</span><br><span class="line">    <span class="keyword">if</span> (update &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;修改课程信息失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//修改课程描述表</span></span><br><span class="line">    EduCourseDescription eduCourseDescription = <span class="keyword">new</span> EduCourseDescription();</span><br><span class="line">    eduCourseDescription.setId(courseInfoVo.getId());</span><br><span class="line">    eduCourseDescription.setDescription(courseInfoVo.getDescription());</span><br><span class="line">    eduCourseDescriptionService.updateById(eduCourseDescription);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-整合前端"><a href="#3-整合前端" class="headerlink" title="3. 整合前端"></a>3. 整合前端</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询课程基本信息</span></span><br><span class="line"><span class="function"><span class="title">getCourseInfoId</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/course/getCourseInfo/&#x27;</span> + id,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改课程信息</span></span><br><span class="line"><span class="function"><span class="title">updateCourseInfo</span>(<span class="params">courseInfo</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/course/updateCourseInfo&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: courseInfo</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>chapter.vue：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">previous</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&quot;/course/info/&quot;</span> + <span class="built_in">this</span>.courseId &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>info.vue：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//获取路由中的id值</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$route.params &amp;&amp; <span class="built_in">this</span>.$route.params.id) &#123;</span><br><span class="line">        <span class="built_in">this</span>.courseId = <span class="built_in">this</span>.$route.params.id;</span><br><span class="line">        <span class="comment">//调用根据id查询课程的方法</span></span><br><span class="line">        <span class="built_in">this</span>.getInfo();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//......</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">getInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    course.getCourseInfoId(<span class="built_in">this</span>.courseId).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//在courseInfo课程基本信息，包含 一级分类id 和 二级分类id</span></span><br><span class="line">        <span class="built_in">this</span>.courseInfo = response.data.courseInfoVo;</span><br><span class="line">        <span class="comment">//1、查询所有的分类，包含一级和二级</span></span><br><span class="line">        subject.getSubjectList().then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//2、获取所有一级分类</span></span><br><span class="line">            <span class="built_in">this</span>.subjectOneList = response.data.list;</span><br><span class="line">            <span class="comment">//3、把所有的一级分类数组进行遍历</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.subjectOneList.length; i++) &#123;</span><br><span class="line">                <span class="comment">//获取每个一级分类</span></span><br><span class="line">                <span class="keyword">var</span> oneSubject = <span class="built_in">this</span>.subjectOneList[i];</span><br><span class="line">                <span class="comment">//比较当前courseInfo里面一级分类id和所有的一级分类id</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">this</span>.courseInfo.subjectParentId == oneSubject.id) &#123;</span><br><span class="line">                    <span class="comment">//获取一级分类所有的二级分类</span></span><br><span class="line">                    <span class="built_in">this</span>.subjectTwoList = oneSubject.children;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//初始化所有讲师</span></span><br><span class="line">        <span class="built_in">this</span>.getTeacherList();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由监听</span></span><br><span class="line">watch: &#123;</span><br><span class="line">    $route(to, <span class="keyword">from</span>) &#123;</span><br><span class="line">        <span class="comment">//路由变化方式，当路由发送变化，方法就执行</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;watch $route&quot;</span>);</span><br><span class="line">        location.reload();</span><br><span class="line">        <span class="built_in">this</span>.courseInfo = &#123;&#125;;</span><br><span class="line">        <span class="built_in">this</span>.courseInfo.cover = <span class="string">&quot;https://guli-academy-edu.oss-cn-							beijing.aliyuncs.com/2021/10/21/8b0a53e19b524c6c9df9b357f1a5b501default.jpg&quot;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="4-最终实现"><a href="#4-最终实现" class="headerlink" title="4. 最终实现"></a>4. 最终实现</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">saveOrUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//判断添加还是修改</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.courseInfo.id) &#123;</span><br><span class="line">        <span class="comment">//添加</span></span><br><span class="line">        <span class="built_in">this</span>.addCourse();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.updateCourse();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改课程</span></span><br><span class="line"><span class="function"><span class="title">updateCourse</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    course.updateCourseInfo(<span class="built_in">this</span>.courseInfo).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            message: <span class="string">&quot;修改课程信息成功！&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//跳转到第二步</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&quot;/course/chapter/&quot;</span> + <span class="built_in">this</span>.courseId &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加课程的方法</span></span><br><span class="line"><span class="function"><span class="title">addCourse</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    course.addCourseInfo(<span class="built_in">this</span>.courseInfo).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//提示信息</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            message: <span class="string">&quot;添加课程信息成功&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//跳转到第二步</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123;</span><br><span class="line">            path: <span class="string">&quot;/course/chapter/&quot;</span> + response.data.courseId,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="课程章节"><a href="#课程章节" class="headerlink" title="课程章节"></a>课程章节</h1><h2 id="1-添加章节"><a href="#1-添加章节" class="headerlink" title="1. 添加章节"></a>1. 添加章节</h2><p>EduChapterController：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加章节</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;addChapter&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">addChapter</span><span class="params">(<span class="meta">@RequestBody</span> EduChapter eduChapter)</span> </span>&#123;</span><br><span class="line">    eduChapterService.save(eduChapter);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前端：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加章节</span></span><br><span class="line"><span class="function"><span class="title">addChapter</span>(<span class="params">chapter</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/chapter/addChapter&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: chapter</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>点击添加章节按钮，弹出添加弹框，输入章节信息，点击保存添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 添加和修改章节表单 --&gt;</span><br><span class="line">&lt;el-dialog :visible.sync&#x3D;&quot;dialogChapterFormVisible&quot; title&#x3D;&quot;添加章节&quot;&gt;</span><br><span class="line">    &lt;el-form :model&#x3D;&quot;chapter&quot; label-width&#x3D;&quot;120px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;章节标题&quot;&gt;</span><br><span class="line">            &lt;el-input v-model&#x3D;&quot;chapter.title&quot; &#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;章节排序&quot;&gt;</span><br><span class="line">            &lt;el-input-number v-model&#x3D;&quot;chapter.sort&quot; </span><br><span class="line">                             :min&#x3D;&quot;0&quot; </span><br><span class="line">                             controls-position&#x3D;&quot;right&quot; &#x2F;&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;&#x2F;el-form&gt;</span><br><span class="line">    &lt;div slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">        &lt;el-button @click&#x3D;&quot;dialogChapterFormVisible &#x3D; false&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;saveOrUpdate&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;el-dialog&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加章节</span></span><br><span class="line"><span class="function"><span class="title">addChapter</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//设置课程id到chapter对象里面</span></span><br><span class="line">    <span class="built_in">this</span>.chapter.courseId = <span class="built_in">this</span>.courseId;</span><br><span class="line">    chapter.addChapter(<span class="built_in">this</span>.chapter).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//关闭弹框</span></span><br><span class="line">        <span class="built_in">this</span>.dialogChapterFormVisible = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//提示</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            message: <span class="string">&quot;添加章节成功!&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//刷新页面</span></span><br><span class="line">        <span class="built_in">this</span>.getChapterVideo();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">saveOrUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.chapter.id) &#123;</span><br><span class="line">        <span class="built_in">this</span>.addChapter();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//......</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="2-删除章节"><a href="#2-删除章节" class="headerlink" title="2. 删除章节"></a>2. 删除章节</h2><p>如果章节里面有小节，如何删除？</p>
<p>第一种：删除章节的时候，把章节里面的所有小节都删除</p>
<p>第二种：如果删除地章节下面有小节，不让进行删除</p>
<p>这里使用第二种方式</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除章节</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;&#123;chapterId&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">deleteChapter</span><span class="params">(<span class="meta">@PathVariable</span> String chapterId)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">boolean</span> flag = eduChapterService.deleteChapter(chapterId);</span><br><span class="line">    <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">        <span class="keyword">return</span> R.ok();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> R.error();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除章节</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">deleteChapter</span><span class="params">(String chapterId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//根据章节id查询章节里面的小节，如果有数据，则不进行删除</span></span><br><span class="line">    QueryWrapper&lt;EduVideo&gt; wrapper = <span class="keyword">new</span> QueryWrapper&lt;&gt;();</span><br><span class="line">    wrapper.eq(<span class="string">&quot;chapter_id&quot;</span>, chapterId);</span><br><span class="line">    <span class="keyword">int</span> count = eduVideoService.count(wrapper);</span><br><span class="line">    <span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//能查出小节</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;不能删除&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> result = baseMapper.deleteById(chapterId);</span><br><span class="line">        <span class="keyword">return</span> result &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前端：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除章节</span></span><br><span class="line"><span class="function"><span class="title">deleteChapter</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/chapter/&#x27;</span> + chapterId,</span><br><span class="line">        method: <span class="string">&#x27;delete&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type&#x3D;&quot;text&quot; @click&#x3D;&quot;removeChapter(chapter.id)&quot;&gt;删除&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除章节</span></span><br><span class="line"><span class="function"><span class="title">removeChapter</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$confirm(<span class="string">&quot;此操作将删除章节, 是否继续?&quot;</span>, <span class="string">&quot;提示&quot;</span>, &#123;</span><br><span class="line">        confirmButtonText: <span class="string">&quot;确定&quot;</span>,</span><br><span class="line">        cancelButtonText: <span class="string">&quot;取消&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//点击确定，执行then方法</span></span><br><span class="line">        <span class="comment">//调用删除的方法</span></span><br><span class="line">        chapter.deleteChapter(chapterId).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//删除成功</span></span><br><span class="line">            <span class="comment">//提示信息</span></span><br><span class="line">            <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">                type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                message: <span class="string">&quot;删除成功!&quot;</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">//刷新页面</span></span><br><span class="line">            <span class="built_in">this</span>.getChapterVideo();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;); <span class="comment">//点击取消，执行catch方法</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="3-修改章节"><a href="#3-修改章节" class="headerlink" title="3. 修改章节"></a>3. 修改章节</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button style&#x3D;&quot;&quot; type&#x3D;&quot;text&quot; @click&#x3D;&quot;openEditChatper(chapter.id)&quot;&gt;编辑&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改章节弹框数据回显</span></span><br><span class="line"><span class="function"><span class="title">openEditChatper</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//弹框</span></span><br><span class="line">    <span class="built_in">this</span>.dialogChapterFormVisible = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//调用接口</span></span><br><span class="line">    chapter.getChapter(chapterId).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chapter = response.data.chapter;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改章节的方法</span></span><br><span class="line"><span class="function"><span class="title">updateChapter</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    chapter.updateChapter(<span class="built_in">this</span>.chapter).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//关闭弹框</span></span><br><span class="line">        <span class="built_in">this</span>.dialogChapterFormVisible = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//提示</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            message: <span class="string">&quot;修改章节成功!&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//刷新页面</span></span><br><span class="line">        <span class="built_in">this</span>.getChapterVideo();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">saveOrUpdate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.chapter.id) &#123;</span><br><span class="line">        <span class="built_in">this</span>.addChapter();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.updateChapter();</span><br><span class="line">        location.reload(); <span class="comment">//刷新</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改章节</span></span><br><span class="line"><span class="function"><span class="title">updateChapter</span>(<span class="params">chapter</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/chapter/updateChapter&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: chapter</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="课程小节"><a href="#课程小节" class="headerlink" title="课程小节"></a>课程小节</h1><h2 id="1-添加小节"><a href="#1-添加小节" class="headerlink" title="1. 添加小节"></a>1. 添加小节</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加小节</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;addVideo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">addVideo</span><span class="params">(<span class="meta">@RequestBody</span> EduVideo eduVideo)</span> </span>&#123;</span><br><span class="line">    eduVideoService.save(eduVideo);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button style&#x3D;&quot;&quot; type&#x3D;&quot;text&quot; @click&#x3D;&quot;openVideo(chapter.id)&quot;&gt;添加小节&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加小节</span></span><br><span class="line"><span class="function"><span class="title">addVideo</span>(<span class="params">video</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/video/addVideo&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: video</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加小节弹框的方法</span></span><br><span class="line"><span class="function"><span class="title">openVideo</span>(<span class="params">chapterId</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//把文件列表清空</span></span><br><span class="line">    <span class="built_in">this</span>.fileList = [];</span><br><span class="line">    <span class="comment">//清空之前的数据</span></span><br><span class="line">    <span class="built_in">this</span>.video = &#123;&#125;;</span><br><span class="line">    <span class="comment">//弹框</span></span><br><span class="line">    <span class="built_in">this</span>.dialogVideoFormVisible = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//设置章节id</span></span><br><span class="line">    <span class="built_in">this</span>.video.chapterId = chapterId;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加小节</span></span><br><span class="line"><span class="function"><span class="title">addVideo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//设置课程id</span></span><br><span class="line">    <span class="built_in">this</span>.video.courseId = <span class="built_in">this</span>.courseId;</span><br><span class="line">    video.addVideo(<span class="built_in">this</span>.video).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//关闭弹框</span></span><br><span class="line">        <span class="built_in">this</span>.dialogVideoFormVisible = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//提示</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            message: <span class="string">&quot;添加小节成功!&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//刷新页面</span></span><br><span class="line">        <span class="built_in">this</span>.getChapterVideo();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="2-删除小节"><a href="#2-删除小节" class="headerlink" title="2.删除小节"></a>2.删除小节</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除小节，删除对应的阿里云中的视频</span></span><br><span class="line"><span class="meta">@DeleteMapping(&quot;&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">deleteVideo</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//根据小节id获取视频id，调用相应的方法实现删除</span></span><br><span class="line">    EduVideo eduVideo = eduVideoService.getById(id);</span><br><span class="line">    String videoSourceId = eduVideo.getVideoSourceId();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断小节里面是否有视频</span></span><br><span class="line">    <span class="keyword">if</span> (!StringUtils.isEmpty(videoSourceId)) &#123;</span><br><span class="line">        <span class="comment">//根据视频id，远程调用，删除视频</span></span><br><span class="line">        R result = vodClient.removeAliyunVideo(videoSourceId);</span><br><span class="line">        <span class="keyword">if</span> (result.getCode() == <span class="number">20001</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> GuliException(<span class="number">20001</span>, <span class="string">&quot;删除视频失败，熔断器&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//删除小节</span></span><br><span class="line">    eduVideoService.removeById(id);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type&#x3D;&quot;text&quot; @click&#x3D;&quot;removeVideo(video.id)&quot;&gt;删除&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除小节</span></span><br><span class="line"><span class="function"><span class="title">removeVideo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$confirm(<span class="string">&quot;此操作将删除小节, 是否继续?&quot;</span>, <span class="string">&quot;提示&quot;</span>, &#123;</span><br><span class="line">        confirmButtonText: <span class="string">&quot;确定&quot;</span>,</span><br><span class="line">        cancelButtonText: <span class="string">&quot;取消&quot;</span>,</span><br><span class="line">        type: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">    &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//点击确定，执行then方法</span></span><br><span class="line">        <span class="comment">//调用删除的方法</span></span><br><span class="line">        video.deleteVideo(id).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">//删除成功</span></span><br><span class="line">            <span class="comment">//提示信息</span></span><br><span class="line">            <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">                type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">                message: <span class="string">&quot;删除小节成功!&quot;</span>,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">//刷新页面</span></span><br><span class="line">            <span class="built_in">this</span>.getChapterVideo();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;); <span class="comment">//点击取消，执行catch方法</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除小节</span></span><br><span class="line"><span class="function"><span class="title">deleteVideo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/video/&#x27;</span> + id,</span><br><span class="line">        method: <span class="string">&#x27;delete&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="3-修改小节"><a href="#3-修改小节" class="headerlink" title="3.修改小节"></a>3.修改小节</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改小节</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;updateVideo&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">updateVideo</span><span class="params">(<span class="meta">@RequestBody</span> EduVideo eduVideo)</span> </span>&#123;</span><br><span class="line">    eduVideoService.updateById(eduVideo);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type&#x3D;&quot;text&quot; @click&#x3D;&quot;getVideoInfo(video.id)&quot;&gt;编辑&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改小节</span></span><br><span class="line"><span class="function"><span class="title">updateVideo</span>(<span class="params">video</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/video/updateVideo&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data: video</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改小节表单回显</span></span><br><span class="line"><span class="function"><span class="title">getVideoInfo</span>(<span class="params">videoId</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//弹出小节弹窗</span></span><br><span class="line">    <span class="built_in">this</span>.dialogVideoFormVisible = <span class="literal">true</span>;</span><br><span class="line">    video.getVideoInfo(videoId).then(<span class="function">(<span class="params">resp</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.video = resp.data.video;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//小节修改</span></span><br><span class="line"><span class="function"><span class="title">updateVideo</span>(<span class="params">videoId</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//设置小节id到video对象中</span></span><br><span class="line">    <span class="built_in">this</span>.video.id = videoId;</span><br><span class="line">    video.updateVideo(<span class="built_in">this</span>.video).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//关闭弹框</span></span><br><span class="line">        <span class="built_in">this</span>.dialogVideoFormVisible = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//提示信息</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            message: <span class="string">&quot;修改小节成功&quot;</span>,</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//刷新页面</span></span><br><span class="line">        <span class="built_in">this</span>.getChapterVideo();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="课程信息确认"><a href="#课程信息确认" class="headerlink" title="课程信息确认"></a>课程信息确认</h1><h2 id="1-多表连接查询"><a href="#1-多表连接查询" class="headerlink" title="1. 多表连接查询"></a>1. 多表连接查询</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524191932.png"></p>
<p>CoursePublishVo：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoursePublishVo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String cover;</span><br><span class="line">    <span class="keyword">private</span> Integer lessonNum;</span><br><span class="line">    <span class="keyword">private</span> String subjectLevelOne;</span><br><span class="line">    <span class="keyword">private</span> String subjectLevelTwo;</span><br><span class="line">    <span class="keyword">private</span> String teacherName;</span><br><span class="line">    <span class="keyword">private</span> String price;<span class="comment">//只用于显示</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduCourseController：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询课程确认信息</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;getPublishCourseInfo/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">getPublishCourseInfo</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">    CoursePublishVo coursePublishVo = courseService.publishCourseInfo(id);</span><br><span class="line">    <span class="keyword">return</span> R.ok().data(<span class="string">&quot;publishCourse&quot;</span>, coursePublishVo);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduCourseServiceImpl：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询课程确认信息</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> CoursePublishVo <span class="title">publishCourseInfo</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">    CoursePublishVo publishCourseInfo = baseMapper.getPublishCourseInfo(id);</span><br><span class="line">    <span class="keyword">return</span> publishCourseInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduCourseMapper：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EduCourseMapper</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">EduCourse</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> CoursePublishVo <span class="title">getPublishCourseInfo</span><span class="params">(String courseId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>EduCourseMapper.xml：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--根据课程id查询课程确认信息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getPublishCourseInfo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.cyk.eduservice.entity.vo.CoursePublishVo&quot;</span>&gt;</span></span><br><span class="line">    SELECT ec.id,</span><br><span class="line">    ec.title,</span><br><span class="line">    ec.price,</span><br><span class="line">    ec.lesson_num AS lessonNum,</span><br><span class="line">    ec.cover,</span><br><span class="line">    et.name       AS teacherName,</span><br><span class="line">    es1.title     AS subjectLevelOne,</span><br><span class="line">    es2.title     AS subjectLevelTwo</span><br><span class="line">    FROM edu_course ec</span><br><span class="line">    LEFT OUTER JOIN edu_course_description ecd</span><br><span class="line">    ON ec.id = ecd.id</span><br><span class="line">    LEFT OUTER JOIN edu_teacher et</span><br><span class="line">    ON ec.teacher_id = et.id</span><br><span class="line">    LEFT OUTER JOIN edu_subject es1</span><br><span class="line">    ON ec.subject_parent_id = es1.id</span><br><span class="line">    LEFT OUTER JOIN edu_subject es2</span><br><span class="line">    ON ec.subject_id = es2.id</span><br><span class="line">    WHERE ec.id = #&#123;courseId&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="2-可能存在的问题？"><a href="#2-可能存在的问题？" class="headerlink" title="2. 可能存在的问题？"></a>2. 可能存在的问题？</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192203.png"></p>
<p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192941.png"></p>
<h2 id="3-前端实现"><a href="#3-前端实现" class="headerlink" title="3. 前端实现"></a>3. 前端实现</h2><p>首先要获取到路由中的课程id，根据此课程id查询展示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//获取里面的课程id值</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$route.params &amp;&amp; <span class="built_in">this</span>.$route.params.id) &#123;</span><br><span class="line">        <span class="built_in">this</span>.courseId = <span class="built_in">this</span>.$route.params.id;</span><br><span class="line">        <span class="comment">//调用接口方法根据课程id查询</span></span><br><span class="line">        <span class="built_in">this</span>.getCoursePublishId();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根据课程id查询</span></span><br><span class="line"><span class="function"><span class="title">getCoursePublishId</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    course.getPublishCourseInfo(<span class="built_in">this</span>.courseId).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.coursePublish = response.data.publishCourse;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//课程确认信息显示</span></span><br><span class="line"><span class="function"><span class="title">getPublishCourseInfo</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/course/getPublishCourseInfo/&#x27;</span> + id,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;ccInfo&quot;&gt;</span><br><span class="line">    &lt;img :src&#x3D;&quot;coursePublish.cover&quot; &#x2F;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;main&quot;&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123; coursePublish.title &#125;&#125;&lt;&#x2F;h2&gt;</span><br><span class="line">        &lt;p class&#x3D;&quot;gray&quot;&gt;</span><br><span class="line">            &lt;span&gt;共&#123;&#123; coursePublish.lessonNum &#125;&#125;课时&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">            &lt;span&gt;所属分类：&#123;&#123; coursePublish.subjectLevelOne &#125;&#125; —</span><br><span class="line">                &#123;&#123; coursePublish.subjectLevelTwo &#125;&#125;&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;p&gt;</span><br><span class="line">        &lt;p&gt;课程讲师：&#123;&#123; coursePublish.teacherName &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class="line">        &lt;h3 class&#x3D;&quot;red&quot;&gt;￥&#123;&#123; coursePublish.price &#125;&#125;&lt;&#x2F;h3&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-最终发布"><a href="#4-最终发布" class="headerlink" title="4.最终发布"></a>4.最终发布</h2><p>修改课程的status状态是Normal(已发布)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//课程最终发布，修改课程状态</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;publishCourse/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> R <span class="title">publishCourse</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span> </span>&#123;</span><br><span class="line">    EduCourse eduCourse = <span class="keyword">new</span> EduCourse();</span><br><span class="line">    eduCourse.setId(id);</span><br><span class="line">    eduCourse.setStatus(<span class="string">&quot;Normal&quot;</span>);<span class="comment">//设置课程发布状态</span></span><br><span class="line">    courseService.updateById(eduCourse);</span><br><span class="line">    <span class="keyword">return</span> R.ok();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//课程最终发布</span></span><br><span class="line"><span class="function"><span class="title">publishCourse</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/eduservice/course/publishCourse/&#x27;</span> + id,</span><br><span class="line">        method: <span class="string">&#x27;post&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最终发布</span></span><br><span class="line"><span class="function"><span class="title">publish</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    course.publishCourse(<span class="built_in">this</span>.courseId).then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//提示</span></span><br><span class="line">        <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">            type: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">            message: <span class="string">&quot;课程发布成功!&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">//跳转课程列表页面</span></span><br><span class="line">        <span class="built_in">this</span>.$router.push(&#123; <span class="attr">path</span>: <span class="string">&quot;/course/list&quot;</span> &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h1 id="课程列表"><a href="#课程列表" class="headerlink" title="课程列表"></a>课程列表</h1><p>类似于讲师列表</p>
<p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220525144554.png"></p>
<h2 id="删除课程"><a href="#删除课程" class="headerlink" title="删除课程"></a>删除课程</h2><p>一般不用外键做约束，因为如果用外键作为约束条件，在删除课程时，需要先删除章节表中的数据，否则，课程表中的数据无法被删除</p>
<p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220525145251.png"></p>
<h1 id="阿里云视频点播"><a href="#阿里云视频点播" class="headerlink" title="阿里云视频点播"></a>阿里云视频点播</h1><h2 id="1-视频地址"><a href="#1-视频地址" class="headerlink" title="1. 视频地址"></a>1. 视频地址</h2><p>在线教育平台中，所有的视频都需要上传到阿里云，使用阿里云点播技术，通过获取阿里云中的视频地址，可以进行视频播放</p>
<h2 id="2-视频加密"><a href="#2-视频加密" class="headerlink" title="2. 视频加密"></a>2. 视频加密</h2><p>我们需要在阿里云中对视频进行加密，防止视频被盗取，但是在加密之后，无法再通过视频地址播放视频</p>
<h2 id="3-视频id"><a href="#3-视频id" class="headerlink" title="3. 视频id"></a>3. 视频id</h2><p>通过视频id，可以获取到加密视频的播放凭证和播放地址，通过播放凭证既可以播放加密视频，也可以播放非加密视频。所以，需要<strong>在数据库中存储视频id</strong></p>
<p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220525151654.png"></p>
<h2 id="4-获取视频凭证"><a href="#4-获取视频凭证" class="headerlink" title="4. 获取视频凭证"></a>4. 获取视频凭证</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220525152624.png"></p>
<h2 id="5-上传视频测试"><a href="#5-上传视频测试" class="headerlink" title="5. 上传视频测试"></a>5. 上传视频测试</h2><p>手动安装jar包</p>
<p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220525155547.png"></p>
<h2 id="6-上传小节视频"><a href="#6-上传小节视频" class="headerlink" title="6. 上传小节视频"></a>6. 上传小节视频</h2><p><img src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220525162047.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2022/04/11/SpringMVC%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2022/04/11/SpringMVC%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">SpringMVC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-11 21:04:42" itemprop="dateCreated datePublished" datetime="2022-04-11T21:04:42+08:00">2022-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-16 22:09:18" itemprop="dateModified" datetime="2022-10-16T22:09:18+08:00">2022-10-16</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2022/04/11/SpringMVC%E7%AC%94%E8%AE%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2022/04/11/SpringMVC%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>55k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>50 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>SpringMVC</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2022/04/11/SpringMVC%E7%AC%94%E8%AE%B0/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2022/04/08/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2022/04/08/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">MySQL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-08 15:33:41" itemprop="dateCreated datePublished" datetime="2022-04-08T15:33:41+08:00">2022-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-16 22:00:51" itemprop="dateModified" datetime="2022-10-16T22:00:51+08:00">2022-10-16</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2022/04/08/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2022/04/08/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>169k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2:34</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>MySQL数据库笔记</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2022/04/08/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%94%E8%AE%B0/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2022/04/08/Java%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2022/04/08/Java%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">Java核心技术</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-08 15:32:30" itemprop="dateCreated datePublished" datetime="2022-04-08T15:32:30+08:00">2022-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-16 21:43:57" itemprop="dateModified" datetime="2022-10-16T21:43:57+08:00">2022-10-16</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2022/04/08/Java%E7%AC%94%E8%AE%B0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2022/04/08/Java%E7%AC%94%E8%AE%B0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>111k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1:41</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Java核心技术</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2022/04/08/Java%E7%AC%94%E8%AE%B0/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2021/12/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%89%EF%BC%89%E6%A0%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2021/12/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%89%EF%BC%89%E6%A0%88/" class="post-title-link" itemprop="url">数据结构与算法（三）栈</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-12-14 11:21:06" itemprop="dateCreated datePublished" datetime="2021-12-14T11:21:06+08:00">2021-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-17 10:39:11" itemprop="dateModified" datetime="2022-10-17T10:39:11+08:00">2022-10-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2021/12/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%89%EF%BC%89%E6%A0%88/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2021/12/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%89%EF%BC%89%E6%A0%88/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>13 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>栈的基本使用</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2021/12/14/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%89%EF%BC%89%E6%A0%88/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2021/11/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%BA%8C%EF%BC%89%E9%93%BE%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2021/11/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%BA%8C%EF%BC%89%E9%93%BE%E8%A1%A8/" class="post-title-link" itemprop="url">数据结构与算法（二）链表</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-29 17:16:14" itemprop="dateCreated datePublished" datetime="2021-11-29T17:16:14+08:00">2021-11-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-17 10:21:11" itemprop="dateModified" datetime="2022-10-17T10:21:11+08:00">2022-10-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2021/11/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%BA%8C%EF%BC%89%E9%93%BE%E8%A1%A8/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2021/11/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%BA%8C%EF%BC%89%E9%93%BE%E8%A1%A8/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>16k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>15 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>链表的基本使用</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2021/11/29/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%BA%8C%EF%BC%89%E9%93%BE%E8%A1%A8/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2021/11/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%80%EF%BC%89%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84%E5%92%8C%E9%98%9F%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2021/11/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%80%EF%BC%89%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84%E5%92%8C%E9%98%9F%E5%88%97/" class="post-title-link" itemprop="url">数据结构与算法（一）稀疏数组和队列</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-26 21:08:27" itemprop="dateCreated datePublished" datetime="2021-11-26T21:08:27+08:00">2021-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-17 10:11:24" itemprop="dateModified" datetime="2022-10-17T10:11:24+08:00">2022-10-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2021/11/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%80%EF%BC%89%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84%E5%92%8C%E9%98%9F%E5%88%97/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2021/11/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%80%EF%BC%89%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84%E5%92%8C%E9%98%9F%E5%88%97/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>8 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>稀疏数组和队列的基本使用</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2021/11/26/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%EF%BC%88%E4%B8%80%EF%BC%89%E7%A8%80%E7%96%8F%E6%95%B0%E7%BB%84%E5%92%8C%E9%98%9F%E5%88%97/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2021/11/20/Ubuntu20.04%E6%90%AD%E5%BB%BA%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2021/11/20/Ubuntu20.04%E6%90%AD%E5%BB%BA%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url">Ubuntu20.04搭建谷粒学院环境</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-20 14:17:49" itemprop="dateCreated datePublished" datetime="2021-11-20T14:17:49+08:00">2021-11-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-01 14:51:35" itemprop="dateModified" datetime="2022-08-01T14:51:35+08:00">2022-08-01</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2021/11/20/Ubuntu20.04%E6%90%AD%E5%BB%BA%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E7%8E%AF%E5%A2%83/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2021/11/20/Ubuntu20.04%E6%90%AD%E5%BB%BA%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E7%8E%AF%E5%A2%83/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Ubuntu20.04搭建谷粒学院环境</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2021/11/20/Ubuntu20.04%E6%90%AD%E5%BB%BA%E8%B0%B7%E7%B2%92%E5%AD%A6%E9%99%A2%E7%8E%AF%E5%A2%83/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://github.com/rulerofterabithia/2021/11/20/VS%20Code%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81%E5%88%B0%20Github/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
      <meta itemprop="name" content="特雷比西亚的王">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/hexo-blog/2021/11/20/VS%20Code%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81%E5%88%B0%20Github/" class="post-title-link" itemprop="url">VS Code上传代码到 github（命令实现）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-20 14:16:46" itemprop="dateCreated datePublished" datetime="2021-11-20T14:16:46+08:00">2021-11-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-10-17 10:05:15" itemprop="dateModified" datetime="2022-10-17T10:05:15+08:00">2022-10-17</time>
              </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/hexo-blog/2021/11/20/VS%20Code%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81%E5%88%B0%20Github/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/hexo-blog/2021/11/20/VS%20Code%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81%E5%88%B0%20Github/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>655</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>VSCode上传代码到Github</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/hexo-blog/2021/11/20/VS%20Code%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81%E5%88%B0%20Github/">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="特雷比西亚的王"
      src="https://rulerofterabithia-blog.oss-cn-hangzhou.aliyuncs.com/img/20220524192347.gif">
  <p class="site-author-name" itemprop="name">特雷比西亚的王</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-tags">
            <a href="/hexo-blog/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/rulerofterabithia" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;rulerofterabithia"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:caiyongkangofficial@gmail.com" title="E-Mail → mailto:caiyongkangofficial@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/u/6665954583" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;u&#x2F;6665954583" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://tayun.github.io/" title="https:&#x2F;&#x2F;tayun.github.io&#x2F;" rel="noopener" target="_blank">踏云</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">特雷比西亚的王</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">452k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">6:51</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script size="300" alpha="0.6" zIndex="-1" src="/hexo-blog/lib/canvas-ribbon/canvas-ribbon.js"></script>
  <script src="/hexo-blog/lib/anime.min.js"></script>
  <script src="/hexo-blog/lib/velocity/velocity.min.js"></script>
  <script src="/hexo-blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/hexo-blog/js/utils.js"></script>

<script src="/hexo-blog/js/motion.js"></script>


<script src="/hexo-blog/js/schemes/pisces.js"></script>


<script src="/hexo-blog/js/next-boot.js"></script>




  




  
<script src="/hexo-blog/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'wBHAJhsXXAkSNA5Eoe3uyMxP-gzGzoHsz',
      appKey     : 'u1IMBtl0krlUnSGwtBCKmKm1',
      placeholder: "请友善评论",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>



</body>
</html>
